<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>指针进阶与结构体练习 - C语言教程</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 侧边导航栏 -->
    <nav class="tutorial-nav">
        <ul>
            <li><a href="#intro" class="active">简介</a></li>
            <li><a href="#multi-level-pointer">多级指针</a></li>
            <li><a href="#pointer-arithmetic">指针算术</a></li>
            <li><a href="#pointer-array">指针数组</a></li>
            <li><a href="#array-pointer">数组指针</a></li>
            <li><a href="#function-pointer">函数指针</a></li>
            <li><a href="#struct-basic">结构体基础</a></li>
            <li><a href="#typedef">typedef</a></li>
        </ul>
    </nav>

    <!-- 主内容区域 -->
    <main class="tutorial-content">
        <!-- 页面标题 -->
        <header class="tutorial-header">
            <h1>指针进阶与结构体练习</h1>
            <p>掌握 C 语言指针的高级用法和结构体的使用方法</p>
        </header>
            <!-- 简介 -->
            <section id="intro" class="section">
                <h2 class="section-title">指针进阶与结构体</h2>
                <div class="subsection-content">
                    <h3>本章学习目标</h3>
                    <p>本章深入学习指针的高级特性和结构体的使用方法，这些是掌握C语言的关键知识点。</p>
                    
                    <h4>为什么要学习这些内容？</h4>
                    <ul>
                        <li><strong>多级指针</strong>：理解指针的指针，掌握动态内存的高级管理技巧</li>
                        <li><strong>指针算术</strong>：高效操作数组和内存，是底层编程的基础</li>
                        <li><strong>指针数组与数组指针</strong>：处理字符串数组、多维数组的必备技能</li>
                        <li><strong>函数指针</strong>：实现回调函数、多态性等高级编程技巧</li>
                        <li><strong>结构体</strong>：组织复杂数据，构建实用的数据结构</li>
                        <li><strong>typedef</strong>：简化复杂类型声明，提高代码可读性</li>
                    </ul>

                    <h4>本章内容结构</h4>
                    <div class="callout-tip">
                        <p><strong>第一部分：高级指针技术</strong></p>
                        <ul>
                            <li>多级指针的概念和应用</li>
                            <li>指针算术运算的原理和实践</li>
                        </ul>
                        
                        <p><strong>第二部分：特殊指针类型</strong></p>
                        <ul>
                            <li>指针数组：存储多个指针</li>
                            <li>数组指针：指向整个数组</li>
                            <li>函数指针：指向函数的指针</li>
                        </ul>
                        
                        <p><strong>第三部分：结构化编程</strong></p>
                        <ul>
                            <li>结构体的定义和使用</li>
                            <li>typedef简化类型定义</li>
                        </ul>
                    </div>
                    
                    <div class="callout-note">
                        <strong>学习建议：</strong>
                        <ul>
                            <li>注意括号的位置，它决定了指针类型的含义</li>
                            <li>多画内存图帮助理解多级指针</li>
                            <li>每学完一个概念就动手编写代码实践</li>
                            <li>重点理解指针类型之间的区别</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- 多级指针 -->
            <section id="multi-level-pointer" class="section">
                <h2 class="section-title">多级指针</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">什么是多级指针？</h3>
                    <div class="subsection-content">
                        <h4>核心概念</h4>
                        <p>多级指针（也叫指针的指针）是指向指针的指针。简单来说，一级指针存储普通变量的地址，二级指针存储一级指针的地址，三级指针存储二级指针的地址，以此类推。</p>
                        
                        <div class="callout-tip">
                            <p><strong>指针层级理解：</strong></p>
                            <ul>
                                <li><code>int value</code> - 普通整型变量，存储数据值</li>
                                <li><code>int *ptr</code> - 一级指针，存储int变量的地址</li>
                                <li><code>int **ptr2</code> - 二级指针，存储一级指针的地址</li>
                                <li><code>int ***ptr3</code> - 三级指针，存储二级指针的地址</li>
                            </ul>
                        </div>

                        <h4>为什么需要多级指针？</h4>
                        <p>多级指针在很多场景下都是必需的工具：</p>
                        <ul>
                            <li><strong>修改指针本身</strong>：函数中修改指针变量需要传递指针的地址（二级指针）</li>
                            <li><strong>动态二维数组</strong>：动态分配二维数组需要使用二级指针</li>
                            <li><strong>链表操作</strong>：某些链表操作（如删除节点）需要修改指针，要用二级指针</li>
                            <li><strong>字符串数组</strong>：main函数的argv参数就是char**（字符串数组）</li>
                        </ul>

                        <h4>解引用规则</h4>
                        <div class="callout-tip">
                            <p><strong>关键理解：</strong>每增加一个<code>*</code>号，就向下解引用一层</p>
                            <ul>
                                <li><code>ptr</code> - 二级指针本身（存储一级指针的地址）</li>
                                <li><code>*ptr</code> - 解引用一次，得到一级指针（存储int变量的地址）</li>
                                <li><code>**ptr</code> - 解引用两次，得到最终的int值</li>
                            </ul>
                        </div>

                        <h4>实际应用场景</h4>
                        <div class="callout-tip">
                            <p><strong>1. 函数中修改指针</strong></p>
                            <p>如果函数需要修改指针变量本身（而不只是修改指针指向的值），就需要传递二级指针。</p>
                            
                            <p><strong>2. 动态二维数组</strong></p>
                            <p>动态分配二维数组时，返回的是指向指针的指针（二级指针）。</p>
                            
                            <p><strong>3. 链表节点删除</strong></p>
                            <p>删除链表节点时，需要修改前一个节点的next指针，使用二级指针可以简化代码。</p>
                        </div>

                        <div class="callout-note">
                            <strong>初学者注意：</strong>
                            <ul>
                                <li>多级指针不要超过三级，否则代码难以理解和维护</li>
                                <li>声明时<code>**</code>连在一起，但使用时要分步解引用</li>
                                <li>二级指针最常用，主要用于动态二维数组和修改指针</li>
                                <li>画内存图是理解多级指针的最佳方法</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">二级指针的使用</h3>
                    
                    <div class="subsection-content">
                        <p><strong>代码功能说明：</strong></p>
                        <p>这个程序演示二级指针的基本操作：</p>
                        <ul>
                            <li>如何声明和初始化二级指针</li>
                            <li>如何通过二级指针访问和修改数据</li>
                            <li>如何通过二级指针修改一级指针的指向</li>
                        </ul>
                        
                        <div class="callout-tip">
                            <p><strong>重点理解：</strong></p>
                            <ul>
                                <li><code>int **ptr_to_ptr</code> - 声明二级指针</li>
                                <li><code>ptr_to_ptr = &ptr</code> - 让二级指针指向一级指针</li>
                                <li><code>**ptr_to_ptr</code> - 两次解引用，访问最终的int值</li>
                                <li><code>*ptr_to_ptr</code> - 一次解引用，得到一级指针</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-block-title">二级指针示例</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-comment">// 步骤1：声明普通变量</span>
    <span class="c-keyword">int</span> value = <span class="c-number">42</span>;
    
    <span class="c-comment">// 步骤2：声明一级指针并指向value</span>
    <span class="c-keyword">int</span> *ptr = &amp;value;
    
    <span class="c-comment">// 步骤3：声明二级指针并指向一级指针</span>
    <span class="c-keyword">int</span> **ptr_to_ptr = &amp;ptr;
    
    <span class="c-comment">// 通过不同方式访问value的值</span>
    <span class="c-function">printf</span>(<span class="c-string">"直接访问: value = %d\n"</span>, value);
    <span class="c-function">printf</span>(<span class="c-string">"一级指针: *ptr = %d\n"</span>, *ptr);
    <span class="c-function">printf</span>(<span class="c-string">"二级指针: **ptr_to_ptr = %d\n\n"</span>, **ptr_to_ptr);
    
    <span class="c-comment">// 通过二级指针修改value的值</span>
    **ptr_to_ptr = <span class="c-number">100</span>;  <span class="c-comment">// 等价于 *ptr = 100; 也等价于 value = 100;</span>
    <span class="c-function">printf</span>(<span class="c-string">"修改后 value = %d\n\n"</span>, value);
    
    <span class="c-comment">// 修改一级指针的指向</span>
    <span class="c-keyword">int</span> another_value = <span class="c-number">200</span>;
    *ptr_to_ptr = &amp;another_value;  <span class="c-comment">// 让ptr指向another_value</span>
    
    <span class="c-function">printf</span>(<span class="c-string">"修改指向后:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"  value = %d (未变)\n"</span>, value);
    <span class="c-function">printf</span>(<span class="c-string">"  *ptr = %d (指向another_value)\n"</span>, *ptr);
    <span class="c-function">printf</span>(<span class="c-string">"  **ptr_to_ptr = %d\n"</span>, **ptr_to_ptr);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">三级指针的复杂操作</h3>
                    
                    <div class="subsection-content">
                        <p><strong>代码功能说明：</strong></p>
                        <p>虽然三级指针在实际开发中很少使用，但理解它有助于深入掌握指针的本质。</p>
                        
                        <div class="callout-warning">
                            <strong>⚠️ 实际开发建议：</strong>
                            <p>三级及以上的指针会让代码难以理解和维护，应尽量避免使用。如果确实需要，考虑用结构体封装来简化设计。</p>
                        </div>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-block-title">三级指针演示</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-comment">// 建立指针链</span>
    <span class="c-keyword">int</span> value = <span class="c-number">10</span>;
    <span class="c-keyword">int</span> *ptr1 = &amp;value;         <span class="c-comment">// 一级指针指向value</span>
    <span class="c-keyword">int</span> **ptr2 = &amp;ptr1;        <span class="c-comment">// 二级指针指向ptr1</span>
    <span class="c-keyword">int</span> ***ptr3 = &amp;ptr2;       <span class="c-comment">// 三级指针指向ptr2</span>
    
    <span class="c-comment">// 通过不同级别的指针访问value</span>
    <span class="c-function">printf</span>(<span class="c-string">"通过不同级别的指针访问:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"  value = %d\n"</span>, value);
    <span class="c-function">printf</span>(<span class="c-string">"  *ptr1 = %d\n"</span>, *ptr1);
    <span class="c-function">printf</span>(<span class="c-string">"  **ptr2 = %d\n"</span>, **ptr2);
    <span class="c-function">printf</span>(<span class="c-string">"  ***ptr3 = %d\n\n"</span>, ***ptr3);
    
    <span class="c-comment">// 通过三级指针修改值</span>
    ***ptr3 = <span class="c-number">999</span>;  <span class="c-comment">// 修改value的值</span>
    <span class="c-function">printf</span>(<span class="c-string">"修改后 value = %d\n\n"</span>, value);
    
    <span class="c-comment">// 显示各级指针的地址</span>
    <span class="c-function">printf</span>(<span class="c-string">"指针地址链:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"  &amp;value = %p (value的地址)\n"</span>, (void*)&amp;value);
    <span class="c-function">printf</span>(<span class="c-string">"  ptr1   = %p (ptr1的值，等于&amp;value)\n"</span>, (void*)ptr1);
    <span class="c-function">printf</span>(<span class="c-string">"  &amp;ptr1  = %p (ptr1的地址)\n"</span>, (void*)&amp;ptr1);
    <span class="c-function">printf</span>(<span class="c-string">"  ptr2   = %p (ptr2的值，等于&amp;ptr1)\n"</span>, (void*)ptr2);
    <span class="c-function">printf</span>(<span class="c-string">"  &amp;ptr2  = %p (ptr2的地址)\n"</span>, (void*)&amp;ptr2);
    <span class="c-function">printf</span>(<span class="c-string">"  ptr3   = %p (ptr3的值，等于&amp;ptr2)\n"</span>, (void*)ptr3);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：二级指针修改变量</h3>
                    <div class="question-item">
                        <p><strong>练习1：</strong> 使用二级指针 <code>int **pp</code> 修改一个 <code>int</code> 变量的值，并将一级指针改为指向另一个变量，观察输出变化。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            
                            <div class="callout-tip">
                                <p><strong>代码分析：</strong></p>
                                <p>二级指针是"指向指针的指针"，听起来很绕口，但思路很简单：</p>
                                <ul>
                                    <li><code>int a</code> - 普通变量，存储整数</li>
                                    <li><code>int *p</code> - 一级指针，存储a的地址</li>
                                    <li><code>int **pp</code> - 二级指针，存储p的地址</li>
                                    <li><code>**pp</code> - 两次解引用，最终访问到a的值</li>
                                </ul>
                            </div>
                            
                            <div class="code-block">
                                <div class="code-block-title">二级指针操作</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-comment">// 声明两个普通变量</span>
    <span class="c-keyword">int</span> a = <span class="c-number">10</span>;
    <span class="c-keyword">int</span> b = <span class="c-number">20</span>;
    
    <span class="c-comment">// p是一级指针，指向a</span>
    <span class="c-keyword">int</span> *p = &amp;a;
    
    <span class="c-comment">// pp是二级指针，指向p</span>
    <span class="c-keyword">int</span> **pp = &amp;p;
    
    <span class="c-comment">// 通过二级指针修改a的值</span>
    <span class="c-function">printf</span>(<span class="c-string">"==== 初始值 ====\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"a = %d, *p = %d, **pp = %d\n\n"</span>, a, *p, **pp);
    
    **pp = <span class="c-number">100</span>;  <span class="c-comment">// 等价于 *p = 100; 也等价于 a = 100;</span>
    <span class="c-function">printf</span>(<span class="c-string">"==== 修改后 ====\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"a = %d, *p = %d, **pp = %d\n\n"</span>, a, *p, **pp);
    
    <span class="c-comment">// 通过二级指针修改一级指针的指向</span>
    *pp = &amp;b;  <span class="c-comment">// *pp 就是 p，所以这一行相当于 p = &b;</span>
    
    <span class="c-function">printf</span>(<span class="c-string">"==== p指向改为b后 ====\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"a = %d, b = %d, *p = %d\n\n"</span>, a, b, *p);
    
    <span class="c-comment">// 现在再次通过**pp修改，会改变b</span>
    **pp = <span class="c-number">300</span>;
    <span class="c-function">printf</span>(<span class="c-string">"==== 再次修改后 ====\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"a = %d, b = %d, *p = %d\n"</span>, a, b, *p);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">多级指针的实际应用</h3>
                    
                    <div class="subsection-content">
                        <p><strong>应用场景1：函数中修改指针</strong></p>
                        <p>当函数需要修改指针变量本身（而不只是修改指针指向的值）时，必须使用二级指针。</p>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-block-title">通过函数修改指针</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;stdlib.h&gt;</span>

<span class="c-comment">// 使用二级指针在函数中修改指针</span>
<span class="c-keyword">void</span> <span class="c-function">allocate_memory</span>(<span class="c-keyword">int</span> **ptr, <span class="c-keyword">int</span> value) {
    *ptr = (<span class="c-keyword">int</span>*)malloc(<span class="c-keyword">sizeof</span>(<span class="c-keyword">int</span>));
    **ptr = value;  <span class="c-comment">// 设置值</span>
    <span class="c-function">printf</span>(<span class="c-string">"函数内分配内存并设置值为: %d\n"</span>, **ptr);
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> *p = NULL;  <span class="c-comment">// 初始化为NULL</span>
    
    <span class="c-function">printf</span>(<span class="c-string">"调用前: p = %p\n"</span>, (void*)p);
    
    <span class="c-comment">// 传递p的地址（二级指针），函数内可以修改p本身</span>
    allocate_memory(&amp;p, <span class="c-number">42</span>);
    
    <span class="c-function">printf</span>(<span class="c-string">"调用后: p = %p, *p = %d\n"</span>, (void*)p, *p);
    
    <span class="c-comment">// 释放内存</span>
    free(p);
    p = NULL;
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：动态数组与二级指针</h3>
                    <div class="question-item">
                        <p><strong>练习2：</strong> 编写函数使用二级指针动态创建整型数组，在main函数中调用并访问数组元素，最后释放内存。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">动态数组创建</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;stdlib.h&gt;</span>

<span class="c-keyword">void</span> <span class="c-function">create_array</span>(<span class="c-keyword">int</span> **arr, <span class="c-keyword">int</span> size) {
    <span class="c-keyword">int</span> i;
    *arr = (<span class="c-keyword">int</span>*)malloc(size * <span class="c-keyword">sizeof</span>(<span class="c-keyword">int</span>));
    <span class="c-keyword">for</span>(i = <span class="c-number">0</span>; i &lt; size; i++) {
        (*arr)[i] = i * <span class="c-number">10</span>;
    }
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">int</span> *array = NULL;
    <span class="c-keyword">int</span> size = <span class="c-number">5</span>;
    
    create_array(&amp;array, size);
    
    <span class="c-function">printf</span>(<span class="c-string">"数组元素:\n"</span>);
    <span class="c-keyword">for</span>(i = <span class="c-number">0</span>; i &lt; size; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"array[%d] = %d\n"</span>, i, array[i]);
    }
    
    free(array);
    array = NULL;
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>
            </section>

            <!-- 指针算术 -->
            <section id="pointer-arithmetic" class="section">
                <h2 class="section-title">指针算术详解</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">什么是指针算术？</h3>
                    <div class="subsection-content">
                        <h4>核心原理</h4>
                        <p>指针算术（Pointer Arithmetic）是指对指针进行加减运算。与普通整数运算不同，指针运算会根据指针指向的数据类型自动计算偏移量。这是C语言中非常强大且高效的特性。</p>
                        
                        <div class="callout-tip">
                            <p><strong>关键概念：指针运算的步长</strong></p>
                            <p>当对指针进行加减运算时，实际移动的字节数 = 运算数 × sizeof(指针类型)</p>
                            <ul>
                                <li><code>int *ptr; ptr + 1</code> - 向后移动4字节（假设int是4字节）</li>
                                <li><code>double *ptr; ptr + 1</code> - 向后移动8字节（假设double是8字节）</li>
                                <li><code>char *ptr; ptr + 1</code> - 向后移动1字节</li>
                            </ul>
                        </div>

                        <h4>支持的指针运算</h4>
                        <ul>
                            <li><strong>指针 + 整数</strong>：<code>ptr + n</code> 向后移动n个元素</li>
                            <li><strong>指针 - 整数</strong>：<code>ptr - n</code> 向前移动n个元素</li>
                            <li><strong>指针 - 指针</strong>：<code>ptr2 - ptr1</code> 计算两指针间的元素个数</li>
                            <li><strong>指针自增</strong>：<code>ptr++</code> 或 <code>++ptr</code> 移动到下一个元素</li>
                            <li><strong>指针自减</strong>：<code>ptr--</code> 或 <code>--ptr</code> 移动到上一个元素</li>
                            <li><strong>指针比较</strong>：<code>ptr1 < ptr2</code> 比较指针位置关系</li>
                        </ul>

                        <h4>不支持的指针运算</h4>
                        <div class="callout-warning">
                            <p>⚠️ <strong>以下操作是非法的：</strong></p>
                            <ul>
                                <li>❌ 指针 + 指针：<code>ptr1 + ptr2</code></li>
                                <li>❌ 指针 × 整数：<code>ptr * 2</code></li>
                                <li>❌ 指针 ÷ 整数：<code>ptr / 2</code></li>
                                <li>❌ 不同类型指针运算：<code>int_ptr - char_ptr</code></li>
                            </ul>
                        </div>

                        <h4>为什么需要指针算术？</h4>
                        <div class="callout-tip">
                            <p><strong>1. 高效的数组遍历</strong></p>
                            <p>使用指针遍历数组比下标访问更高效，编译器可以更好地优化。</p>
                            
                            <p><strong>2. 字符串处理</strong></p>
                            <p>字符串函数（如strlen、strcpy）内部大量使用指针算术。</p>
                            
                            <p><strong>3. 动态内存管理</strong></p>
                            <p>计算内存块的边界和偏移，管理动态分配的内存。</p>
                            
                            <p><strong>4. 数据结构实现</strong></p>
                            <p>链表、栈、队列等数据结构都依赖指针算术来导航和操作节点。</p>
                        </div>

                        <div class="callout-note">
                            <strong>初学者提示：</strong>
                            <ul>
                                <li>指针运算只对数组或动态分配的连续内存有效</li>
                                <li>不要对指向单个变量的指针进行算术运算（会访问非法内存）</li>
                                <li>指针相减的结果是元素个数，不是字节数</li>
                                <li>始终确保指针运算后仍在合法范围内</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">指针的加法和减法</h3>
                    
                    <div class="subsection-content">
                        <p><strong>代码功能说明：</strong></p>
                        <p>演示指针的加减运算、指针之间的距离计算以及自增自减操作。</p>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-block-title">指针算术操作</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> arr[] = {<span class="c-number">10</span>, <span class="c-number">20</span>, <span class="c-number">30</span>, <span class="c-number">40</span>, <span class="c-number">50</span>, <span class="c-number">60</span>};
    <span class="c-keyword">int</span> *ptr = arr;  <span class="c-comment">// ptr指向数组首元素</span>
    
    <span class="c-function">printf</span>(<span class="c-string">"原始指针: %p\n"</span>, (void*)ptr);
    <span class="c-function">printf</span>(<span class="c-string">"当前值: %d\n\n"</span>, *ptr);
    
    <span class="c-comment">// 指针加法 - 向后移动</span>
    ptr = ptr + <span class="c-number">2</span>;  <span class="c-comment">// 移动到第三个元素（索引2）</span>
    <span class="c-function">printf</span>(<span class="c-string">"ptr + 2: %p\n"</span>, (void*)ptr);
    <span class="c-function">printf</span>(<span class="c-string">"当前值: %d\n\n"</span>, *ptr);
    
    <span class="c-comment">// 指针减法 - 向前移动</span>
    ptr = ptr - <span class="c-number">1</span>;  <span class="c-comment">// 回到第二个元素（索引1）</span>
    <span class="c-function">printf</span>(<span class="c-string">"ptr - 1: %p\n"</span>, (void*)ptr);
    <span class="c-function">printf</span>(<span class="c-string">"当前值: %d\n\n"</span>, *ptr);
    
    <span class="c-comment">// 指针之间的距离</span>
    <span class="c-keyword">int</span> *ptr1 = &amp;arr[<span class="c-number">1</span>];
    <span class="c-keyword">int</span> *ptr2 = &amp;arr[<span class="c-number">4</span>];
    <span class="c-function">printf</span>(<span class="c-string">"两个指针之间的元素个数: ptr2 - ptr1 = %d\n\n"</span>, (<span class="c-keyword">int</span>)(ptr2 - ptr1));
    
    <span class="c-comment">// 自增自减操作</span>
    ptr = arr;
    <span class="c-function">printf</span>(<span class="c-string">"自增操作:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"  ptr++ 前: %d\n"</span>, *ptr);
    ptr++;  <span class="c-comment">// 移动到下一个元素</span>
    <span class="c-function">printf</span>(<span class="c-string">"  ptr++ 后: %d\n"</span>, *ptr);
    ptr--;  <span class="c-comment">// 回到前一个元素</span>
    <span class="c-function">printf</span>(<span class="c-string">"  ptr-- 后: %d\n"</span>, *ptr);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">不同类型指针的步长</h3>
                    
                    <div class="subsection-content">
                        <p><strong>重要概念：</strong>指针加1不是简单的地址加1，而是根据指针类型移动相应的字节数。</p>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-block-title">不同类型指针的算术</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> int_arr[<span class="c-number">3</span>] = {<span class="c-number">1</span>, <span class="c-number">2</span>, <span class="c-number">3</span>};
    <span class="c-keyword">double</span> double_arr[<span class="c-number">3</span>] = {<span class="c-number">1.1</span>, <span class="c-number">2.2</span>, <span class="c-number">3.3</span>};
    <span class="c-keyword">char</span> char_arr[<span class="c-number">3</span>] = {<span class="c-string">'A'</span>, <span class="c-string">'B'</span>, <span class="c-string">'C'</span>};
    
    <span class="c-keyword">int</span> *int_ptr = int_arr;
    <span class="c-keyword">double</span> *double_ptr = double_arr;
    <span class="c-keyword">char</span> *char_ptr = char_arr;
    
    <span class="c-comment">// int指针的步长</span>
    <span class="c-function">printf</span>(<span class="c-string">"int指针:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"  起始地址: %p\n"</span>, (void*)int_ptr);
    int_ptr++;  <span class="c-comment">// 移动sizeof(int)个字节</span>
    <span class="c-function">printf</span>(<span class="c-string">"  +1 后地址: %p\n"</span>, (void*)int_ptr);
    <span class="c-function">printf</span>(<span class="c-string">"  步长: %d 字节\n\n"</span>, (<span class="c-keyword">int</span>)((char*)int_ptr - (char*)int_arr));
    
    <span class="c-comment">// double指针的步长</span>
    <span class="c-function">printf</span>(<span class="c-string">"double指针:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"  起始地址: %p\n"</span>, (void*)double_ptr);
    double_ptr++;  <span class="c-comment">// 移动sizeof(double)个字节</span>
    <span class="c-function">printf</span>(<span class="c-string">"  +1 后地址: %p\n"</span>, (void*)double_ptr);
    <span class="c-function">printf</span>(<span class="c-string">"  步长: %d 字节\n\n"</span>, (<span class="c-keyword">int</span>)((char*)double_ptr - (char*)double_arr));
    
    <span class="c-comment">// char指针的步长</span>
    <span class="c-function">printf</span>(<span class="c-string">"char指针:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"  起始地址: %p\n"</span>, (void*)char_ptr);
    char_ptr++;  <span class="c-comment">// 移动sizeof(char)个字节</span>
    <span class="c-function">printf</span>(<span class="c-string">"  +1 后地址: %p\n"</span>, (void*)char_ptr);
    <span class="c-function">printf</span>(<span class="c-string">"  步长: %d 字节\n\n"</span>, (<span class="c-keyword">int</span>)((char*)char_ptr - (char*)char_arr));
    
    <span class="c-comment">// 显示各类型的大小</span>
    <span class="c-function">printf</span>(<span class="c-string">"数据类型大小:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"  sizeof(int) = %u 字节\n"</span>, (<span class="c-keyword">unsigned int</span>)<span class="c-keyword">sizeof</span>(<span class="c-keyword">int</span>));
    <span class="c-function">printf</span>(<span class="c-string">"  sizeof(double) = %u 字节\n"</span>, (<span class="c-keyword">unsigned int</span>)<span class="c-keyword">sizeof</span>(<span class="c-keyword">double</span>));
    <span class="c-function">printf</span>(<span class="c-string">"  sizeof(char) = %u 字节\n"</span>, (<span class="c-keyword">unsigned int</span>)<span class="c-keyword">sizeof</span>(<span class="c-keyword">char</span>));
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：指针遍历数组</h3>
                    <div class="question-item">
                        <p><strong>练习3：</strong> 使用指针的自增运算符遍历整型数组，打印每个元素的地址和值，观察地址的变化规律。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">指针遍历数组</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">int</span> arr[] = {<span class="c-number">100</span>, <span class="c-number">200</span>, <span class="c-number">300</span>, <span class="c-number">400</span>, <span class="c-number">500</span>};
    <span class="c-keyword">int</span> size = <span class="c-keyword">sizeof</span>(arr) / <span class="c-keyword">sizeof</span>(arr[<span class="c-number">0</span>]);
    <span class="c-keyword">int</span> *p = arr;
    
    <span class="c-function">printf</span>(<span class="c-string">"使用指针自增遍历:\n"</span>);
    <span class="c-keyword">for</span>(i = <span class="c-number">0</span>; i &lt; size; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"地址: %p, 值: %d\n"</span>, (void*)p, *p);
        p++;  <span class="c-comment">// 指针自增，移动到下一个元素</span>
    }
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">指针算术的实际应用</h3>
                    
                    <div class="subsection-content">
                        <p><strong>应用场景：字符串处理</strong></p>
                        <p>字符串函数是指针算术最常见的应用场景，下面实现几个经典的字符串函数。</p>
                    </div>
                    
                    <div class="code-block">
                        <div class="code-block-title">字符串函数实现</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-comment">// 计算字符串长度</span>
<span class="c-keyword">int</span> <span class="c-function">my_strlen</span>(<span class="c-keyword">const</span> <span class="c-keyword">char</span> *str) {
    <span class="c-keyword">int</span> length = <span class="c-number">0</span>;
    <span class="c-keyword">while</span>(*str != <span class="c-string">'\0'</span>) {
        length++;
        str++;  <span class="c-comment">// 指针算术：移动到下一个字符</span>
    }
    <span class="c-keyword">return</span> length;
}

<span class="c-comment">// 复制字符串</span>
<span class="c-keyword">void</span> <span class="c-function">my_strcpy</span>(<span class="c-keyword">char</span> *dest, <span class="c-keyword">const</span> <span class="c-keyword">char</span> *src) {
    <span class="c-keyword">while</span>((*dest = *src) != <span class="c-string">'\0'</span>) {
        dest++;  <span class="c-comment">// 目标指针前进</span>
        src++;   <span class="c-comment">// 源指针前进</span>
    }
}

<span class="c-comment">// 字符串反转</span>
<span class="c-keyword">void</span> <span class="c-function">reverse_string</span>(<span class="c-keyword">char</span> *str) {
    <span class="c-keyword">char</span> *end = str;
    <span class="c-keyword">char</span> temp;
    
    <span class="c-comment">// 找到字符串末尾</span>
    <span class="c-keyword">while</span>(*end != <span class="c-string">'\0'</span>) {
        end++;
    }
    end--;  <span class="c-comment">// 指向最后一个字符</span>
    
    <span class="c-comment">// 交换字符</span>
    <span class="c-keyword">while</span>(str &lt; end) {
        temp = *str;
        *str = *end;
        *end = temp;
        str++;  <span class="c-comment">// 从前向后</span>
        end--;  <span class="c-comment">// 从后向前</span>
    }
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">char</span> text[] = <span class="c-string">"Hello"</span>;
    <span class="c-keyword">char</span> copy[<span class="c-number">50</span>];
    
    <span class="c-function">printf</span>(<span class="c-string">"原始字符串: %s\n"</span>, text);
    <span class="c-function">printf</span>(<span class="c-string">"字符串长度: %d\n\n"</span>, my_strlen(text));
    
    my_strcpy(copy, text);
    <span class="c-function">printf</span>(<span class="c-string">"复制后: %s\n\n"</span>, copy);
    
    reverse_string(copy);
    <span class="c-function">printf</span>(<span class="c-string">"反转后: %s\n"</span>, copy);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：自定义字符串函数</h3>
                    <div class="question-item">
                        <p><strong>练习4：</strong> 使用指针算术实现字符串拼接函数 <code>my_strcat</code>，将源字符串追加到目标字符串末尾。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">字符串拼接</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">void</span> <span class="c-function">my_strcat</span>(<span class="c-keyword">char</span> *dest, <span class="c-keyword">const</span> <span class="c-keyword">char</span> *src) {
    <span class="c-comment">// 找到dest的末尾</span>
    <span class="c-keyword">while</span>(*dest != <span class="c-string">'\0'</span>) {
        dest++;
    }
    
    <span class="c-comment">// 复制src到dest末尾</span>
    <span class="c-keyword">while</span>((*dest = *src) != <span class="c-string">'\0'</span>) {
        dest++;
        src++;
    }
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">char</span> str1[<span class="c-number">50</span>] = <span class="c-string">"Hello, "</span>;
    <span class="c-keyword">char</span> str2[] = <span class="c-string">"World!"</span>;
    
    <span class="c-function">printf</span>(<span class="c-string">"拼接前: %s\n"</span>, str1);
    my_strcat(str1, str2);
    <span class="c-function">printf</span>(<span class="c-string">"拼接后: %s\n"</span>, str1);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>
            </section>

            <!-- 指针数组 -->
            <section id="pointer-array" class="section">
                <h2 class="section-title">指针数组</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">什么是指针数组？</h3>
                    <div class="subsection-content">
                        <h4>核心概念</h4>
                        <p>指针数组（Array of Pointers）是一个数组，它的每个元素都是指针。本质上，指针数组就是"数组"，只不过数组的元素类型是指针。</p>
                        
                        <div class="callout-tip">
                            <p><strong>声明语法：</strong></p>
                            <pre>类型名 *数组名[数组大小];</pre>
                            <p>例如：</p>
                            <ul>
                                <li><code>int *ptr_arr[5];</code> - 包含5个int指针的数组</li>
                                <li><code>char *str_arr[10];</code> - 包含10个char指针的数组（字符串数组）</li>
                                <li><code>double *dbl_arr[3];</code> - 包含3个double指针的数组</li>
                            </ul>
                        </div>

                        <h4>理解声明的关键</h4>
                        <div class="callout-tip">
                            <p><strong>如何读懂 <code>int *ptr_arr[5]</code>？</strong></p>
                            <p>从标识符开始，按优先级阅读：</p>
                            <ol>
                                <li><code>ptr_arr</code> - 这是标识符</li>
                                <li><code>[5]</code> - []的优先级高于*，所以ptr_arr首先是一个数组</li>
                                <li><code>*</code> - 数组的元素是指针</li>
                                <li><code>int</code> - 指针指向int类型</li>
                            </ol>
                            <p><strong>结论：</strong>ptr_arr是一个数组，包含5个指向int的指针。</p>
                        </div>

                        <h4>为什么需要指针数组？</h4>
                        <ul>
                            <li><strong>字符串数组</strong>：存储多个字符串（字符串本质是char*）</li>
                            <li><strong>动态数据管理</strong>：管理多个动态分配的内存块</li>
                            <li><strong>函数指针表</strong>：实现函数分发、状态机等</li>
                            <li><strong>多级数据访问</strong>：方便地管理多个变量的地址</li>
                        </ul>

                        <h4>指针数组 vs 数组指针</h4>
                        <div class="callout-warning">
                            <p><strong>⚠️ 易混淆概念：</strong></p>
                            <ul>
                                <li><code>int *ptr_arr[5]</code> - <strong>指针数组</strong>：数组的元素是指针</li>
                                <li><code>int (*arr_ptr)[5]</code> - <strong>数组指针</strong>：指向数组的指针</li>
                            </ul>
                            <p>括号的位置决定了含义！</p>
                        </div>

                        <h4>常见应用场景</h4>
                        <div class="callout-tip">
                            <p><strong>1. 字符串数组</strong></p>
                            <pre><code>char *fruits[] = {"Apple", "Banana", "Cherry"};</code></pre>
                            <p>每个元素是指向字符串的指针。</p>
                            
                            <p><strong>2. 命令行参数</strong></p>
                            <pre><code>int main(int argc, char *argv[])</code></pre>
                            <p>argv就是一个字符串指针数组。</p>
                            
                            <p><strong>3. 函数指针数组</strong></p>
                            <pre><code>int (*func_arr[3])(int, int) = {add, sub, mul};</code></pre>
                            <p>存储多个函数指针，实现函数表。</p>
                        </div>

                        <div class="callout-note">
                            <strong>初学者注意：</strong>
                            <ul>
                                <li>指针数组的每个元素都需要初始化或赋值</li>
                                <li>访问时要先取指针，再解引用：<code>*ptr_arr[i]</code></li>
                                <li>字符串数组是指针数组的最常见应用</li>
                                <li>注意和数组指针区分，看括号位置</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">指针数组的基本使用</h3>
                    
                    <div class="subsection-content">
                        <p><strong>代码功能说明：</strong></p>
                        <p>这个程序演示指针数组的基本概念：</p>
                        <ul>
                            <li>如何声明和初始化指针数组</li>
                            <li>如何访问指针数组中的元素</li>
                            <li>指针数组在整型和字符串中的应用</li>
                        </ul>
                        
                        <div class="callout-tip">
                            <p><strong>重点理解：</strong></p>
                            <ul>
                                <li><code>int *ptr_array[3]</code> - 声明包含3个int指针的数组</li>
                                <li><code>{&a, &b, &c}</code> - 用变量的地址初始化数组</li>
                                <li><code>*ptr_array[i]</code> - 解引用访问指针指向的值</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="code-block">
                    <div class="code-block-title">指针数组示例</div>
                    <pre><code><span class="c-comment">// 指针数组：数组元素是指针</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">int</span> a = <span class="c-number">10</span>, b = <span class="c-number">20</span>, c = <span class="c-number">30</span>;
    
    <span class="c-comment">// 指针数组：包含3个int指针</span>
    <span class="c-keyword">int</span> *ptr_array[<span class="c-number">3</span>] = {&amp;a, &amp;b, &amp;c};
    
    <span class="c-function">printf</span>(<span class="c-string">"整数指针数组:\n"</span>);
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < <span class="c-number">3</span>; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"ptr_array[%d] = %d\n"</span>, i, *ptr_array[i]);
    }
    
    <span class="c-comment">// 字符串指针数组</span>
    <span class="c-keyword">char</span> *str_array[] = {<span class="c-string">"Hello"</span>, <span class="c-string">"World"</span>, <span class="c-string">"C"</span>};
    
    <span class="c-function">printf</span>(<span class="c-string">"\n字符串指针数组:\n"</span>);
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < <span class="c-number">3</span>; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"str_array[%d] = %s\n"</span>, i, str_array[i]);
    }
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：指针数组的应用</h3>
                    <div class="question-item">
                        <p><strong>练习1：</strong> 创建一个包含5个整型指针的指针数组，分别指向5个不同的整型变量，通过指针数组遍历输出所有变量的值。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">指针数组遍历</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">int</span> a=<span class="c-number">10</span>, b=<span class="c-number">20</span>, c=<span class="c-number">30</span>, d=<span class="c-number">40</span>, e=<span class="c-number">50</span>;
    <span class="c-keyword">int</span> *ptr_arr[<span class="c-number">5</span>] = {&amp;a, &amp;b, &amp;c, &amp;d, &amp;e};

    <span class="c-function">printf</span>(<span cl<span class="c-keyword">for</span> (i =pan>(<span class="c-keyword">int</span> i=<span class="c-number">0</span>; i&lt;<span class="c-number">5</span>; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"ptr_arr[%d] = %d\n"</span>, i, *ptr_arr[i]);
    }

    <span class="c-comment">// 通过指针数组修改值</span>
    *ptr_arr[<span class="c-number">2</span>] = <span class="c-number">300</span>;
    <span class="c-function">printf</span>(<span class="c-string">"修改后 c = %d\n"</span>, c);

    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">指针数组的内存布局</h3>
                    
                    <div class="memory-layout">
                        <div class="memory-item">
                            <h4>1. 指针数组的存储方式</h4>
                            <div class="code-block">
                                <div class="code-block-title">指针数组内存分析</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> x = <span class="c-number">100</span>, y = <span class="c-number">200</span>, z = <span class="c-number">300</span>;
    
    <span class="c-comment">// 指针数组：存储的是地址</span>
    <span class="c-keyword">int</span> *ptr_arr[<span class="c-number">3</span>] = {&amp;x, &amp;y, &amp;z};
    
    <span class="c-function">printf</span>(<span class="c-string">"变量地址:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"&amp;x = %p, x = %d\n"</span>, (void*)&amp;x, x);
    <span class="c-function">printf</span>(<span class="c-string">"&amp;y = %p, y = %d\n"</span>, (void*)&amp;y, y);
    <span class="c-function">printf</span>(<span class="c-string">"&amp;z = %p, z = %d\n"</span>, (void*)&amp;z, z);
    
    <span class="c-function">printf</span>(<span class="c-string">"\n指针数组内容:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"ptr_arr[0] = %p, *ptr_arr[0] = %d\n"</span>, (void*)ptr_arr[<span class="c-number">0</span>], *ptr_arr[<span class="c-number">0</span>]);
    <span class="c-function">printf</span>(<span class="c-string">"ptr_arr[1] = %p, *ptr_arr[1] = %d\n"</span>, (void*)ptr_arr[<span class="c-number">1</span>], *ptr_arr[<span class="c-number">1</span>]);
    <span class="c-function">printf</span>(<span class="c-string">"ptr_arr[2] = %p, *ptr_arr[2] = %d\n"</span>, (void*)ptr_arr[<span class="c-number">2</span>], *ptr_arr[<span class="c-number">2</span>]);
    
    <span class="c-comment">// 指针数组的大小</span>
    <span class="c-function">printf</span>(<span class="c-string">"\n内存大小:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"sizeof(ptr_arr) = %u 字节\n"</span>, (<span class="c-keyword">unsigned int</span>)(<span class="c-keyword">unsigned int</span>)(<span class="c-keyword">unsigned int</span>)<span class="c-keyword">sizeof</span>(ptr%ur));
    <span class="c-function">printf</span>(<span class="c-string">"sizeof(int*) = %zu 字节\n"</span>, <span class="c-keyword">sizeof</span>(<span class="c-keyword">int</span>*));
    <span class="c-function">p%utf</span>(<span class="c-string">"数组元素个数: %zu\n"</span>, <span class="c-keyword">sizeof</span>(ptr_arr) / <span class="c-keyword">sizeof</span>(<span class="c-keyword">int</span>*));
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </div>

                        <div class="memory-item">
                            <h4>2. 动态指针数组</h4>
                            <div class="code-block">
                                <div class="code-block-title">动态分配的指针数组</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;stdlib.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">int</span> size = <span class="c-number">5</span>;
    
    <span class="c-comment">// 动态分配指针数组</span>
    <span class="c-keyword">int</span> **dynamic_ptr_array = (<span class="c-keyword">int</span>**)malloc(size * <span class="c-keyword">sizeof</span>(<span class="c-keyword">int</span>*));
    
    <span class="c-keyword">if</span> (dynamic_ptr_array == NULL) {
        <span class="c-function">printf</span>(<span class="c-string">"内存分配失败\n"</span>);
        <span class="c-keyword">return</span> <span class="c-number">1</span>;
    }
    
    <span class="c-comment">// 为每个指针分配内存</span>
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < size; i++) {
        dynamic_ptr_array[i] = (<span class="c-keyword">int</span>*)malloc(<span class="c-keyword">sizeof</span>(<span class="c-keyword">int</span>));
        <span class="c-keyword">if</span> (dynamic_ptr_array[i] == NULL) {
            <span class="c-function">printf</span>(<span class="c-string">"内存分配失败\n"</span>);
            <span class="c-keyword">return</span> <span class="c-number">1</span>;
        }
        *dynamic_ptr_array[i] = (i + <span class="c-number">1</span>) * <span class="c-number">10</span>;
    }
    
    <span class="c-function">printf</span>(<span class="c-string">"动态分配的指针数组:\n"</span>);
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < size; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"dynamic_ptr_array[%d] = %d\n"</span>, i, *dynamic_ptr_array[i]);
    }
    
    <span class="c-comment">// 释放内存</span>
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < size; i++) {
        free(dynamic_ptr_array[i]);
    }
    free(dynamic_ptr_array);
    
    <span class="c-function">printf</span>(<span class="c-string">"内存已释放\n"</span>);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">实际应用：命令行参数</h3>
                    <div class="code-block">
                        <div class="code-block-title">main函数的参数（指针数组）</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-comment">// main函数的标准写法：int main(int argc, char *argv[])</span>
<span class="c-comment">// argc: 参数个数，argv: 参数字符串数组</span>
<span class="c-keyword">int</span> <span class="c-function">main</span>(<span class="c-keyword">int</span> argc, <span class="c-keyword">char</span> *argv[]) {
    <span class="c-function">printf</span>(<span class="c-string">"命令行参数:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"参数个数: %d\n"</span>, argc);
    
    <span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; argc; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"argv[%d] = %s\n"</span>, i, argv[i]);
    }
    
    <span class="c-comment">// argv[0] 通常是程序名</span>
    <span class="c-comment">// argv[1] 及以后是命令行参数</span>
    
    <span class="c-keyword">if</span> (argc &gt; <span class="c-number">1</span>) {
        <span class="c-function">printf</span>(<span class="c-string">"\n第一个参数: %s\n"</span>, argv[<span class="c-number">1</span>]);
    } <span class="c-keyword">else</span> {
        <span class="c-function">printf</span>(<span class="c-string">"\n没有提供额外参数\n"</span>);
    }
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：字符串指针数组</h3>
                    <div class="question-item">
                        <p><strong>练习2：</strong> 创建一个包含星期几名称的字符串指针数组，通过循环输出所有星期名称，并能根据索引快速访问指定星期。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">星期数组</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">char</span> *weeks[] = {<span class="c-string">"星期一"</span>, <span class="c-string">"星期二"</span>, <span class="c-string">"星期三"</span>, 
                        <span class="c-string">"星期四"</span>, <span class="c-string">"星期五"</span>, <span class="c-string">"星期六"</span>, <span class="c-string">"星期日"</span>};

    <span class="c-function">printf</span>(<spa<span class="c-keyword">for</span> (i =pan>(<span class="c-keyword">int</span> i=<span class="c-number">0</span>; i&lt;<span class="c-number">7</span>; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"%d. %s\n"</span>, i+<span class="c-number">1</span>, weeks[i]);
    }

    <span class="c-keyword">int</span> day = <span class="c-number">3</span>;
    <span class="c-function">printf</span>(<span class="c-string">"\n第%d天是: %s\n"</span>, day, weeks[day<span class="c-number">-1</span>]);

    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>
            </section>
            <section id="array-pointer" class="section">
                <h2 class="section-title">数组指针</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">什么是数组指针？</h3>
                    <div class="subsection-content">
                        <h4>核心概念</h4>
                        <p>数组指针（Pointer to Array）是指向整个数组的指针，而不是指向数组首元素的指针。数组指针本质上是"指针"，只不过它指向的是一个数组类型。</p>
                        
                        <div class="callout-tip">
                            <p><strong>声明语法：</strong></p>
                            <pre>类型名 (*指针名)[数组大小];</pre>
                            <p>例如：</p>
                            <ul>
                                <li><code>int (*arr_ptr)[5];</code> - 指向包含5个int元素的数组的指针</li>
                                <li><code>double (*dbl_ptr)[10];</code> - 指向包含10个double元素的数组的指针</li>
                                <li><code>char (*str_ptr)[20];</code> - 指向包含20个char元素的数组的指针</li>
                            </ul>
                        </div>

                        <h4>理解声明的关键</h4>
                        <div class="callout-tip">
                            <p><strong>如何读懂 <code>int (*arr_ptr)[5]</code>？</strong></p>
                            <p>从括号开始，按优先级阅读：</p>
                            <ol>
                                <li><code>*arr_ptr</code> - 括号内，arr_ptr首先是一个指针</li>
                                <li><code>[5]</code> - 指针指向一个包含5个元素的数组</li>
                                <li><code>int</code> - 数组的元素类型是int</li>
                            </ol>
                            <p><strong>结论：</strong>arr_ptr是一个指针，指向包含5个int元素的数组。</p>
                        </div>

                        <h4>为什么需要数组指针？</h4>
                        <ul>
                            <li><strong>多维数组传参</strong>：将二维数组传递给函数时，需要使用数组指针</li>
                            <li><strong>动态二维数组</strong>：动态分配连续的二维数组时使用数组指针</li>
                            <li><strong>指针运算优化</strong>：数组指针的步长是整个数组的大小</li>
                            <li><strong>矩阵运算</strong>：处理矩阵时，数组指针可以逐行操作</li>
                        </ul>

                        <h4>数组指针 vs 指针数组</h4>
                        <div class="callout-warning">
                            <p><strong>⚠️ 易混淆概念对比：</strong></p>
                            <table style="width:100%; border-collapse: collapse;">
                                <tr style="background-color: #f0f0f0;">
                                    <th style="border: 1px solid #ddd; padding: 8px;">概念</th>
                                    <th style="border: 1px solid #ddd; padding: 8px;">声明</th>
                                    <th style="border: 1px solid #ddd; padding: 8px;">含义</th>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px;">数组指针</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;"><code>int (*p)[5]</code></td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">指向数组的指针（先*后[]）</td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px;">指针数组</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;"><code>int *p[5]</code></td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">数组的元素是指针（先[]后*）</td>
                                </tr>
                            </table>
                            <p style="margin-top: 10px;">记忆方法：括号优先级最高，<code>(*p)</code> 说明p先是指针，<code>p[]</code> 说明p先是数组。</p>
                        </div>

                        <h4>数组指针的步长特性</h4>
                        <div class="callout-tip">
                            <p><strong>关键理解：</strong>数组指针+1不是移动sizeof(元素类型)字节，而是移动sizeof(整个数组)字节。</p>
                            <ul>
                                <li><code>int (*p)[5]; p + 1</code> - 移动 5 × sizeof(int) = 20字节（假设int是4字节）</li>
                                <li><code>int *p; p + 1</code> - 移动 1 × sizeof(int) = 4字节</li>
                            </ul>
                            <p>这使得数组指针非常适合逐行遍历二维数组！</p>
                        </div>

                        <div class="callout-note">
                            <strong>初学者注意：</strong>
                            <ul>
                                <li>括号是必需的！<code>int *p[5]</code> 和 <code>int (*p)[5]</code> 完全不同</li>
                                <li>数组指针主要用于二维数组操作</li>
                                <li>数组指针的步长是整个数组的大小</li>
                                <li>函数参数中 <code>int arr[][4]</code> 等价于 <code>int (*arr)[4]</code></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">指向数组的指针</h3>
                    <div class="code-block">
                    <div class="code-block-title">数组指针示例</div>
                    <pre><code><span class="c-comment">// 数组指针：指向整个数组的指针</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i, j;
    <span class="c-keyword">int</span> arr[<span class="c-number">3</span>][<span class="c-number">4</span>] = {
        {<span class="c-number">1</span>, <span class="c-number">2</span>, <span class="c-number">3</span>, <span class="c-number">4</span>},
        {<span class="c-number">5</span>, <span class="c-number">6</span>, <span class="c-number">7</span>, <span class="c-number">8</span>},
        {<span class="c-number">9</span>, <span class="c-number">10</span>, <span class="c-number">11</span>, <span class="c-number">12</span>}
    };
    
    <span class="c-comment">// 数组指针：指向包含4个int的数组</span>
    <span class="c-keyword">int</span> (*array_ptr)[<span class="c-number">4</span>] = arr;
    
    <span class="c-function">printf</span>(<span<span class="c-keyword">for</span> (i =/span>(<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i &lt; <sp<span class="c-keyword">for</span> (j =/span>(<span class="c-keyword">int</span> j = <span class="c-number">0</span>; j &lt; <span class="c-number">4</span>; j++) {
            <span class="c-function">printf</span>(<span class="c-string">"%d "</span>, *(*(array_ptr + i) + j));
        }
        <span class="c-function">printf</span>(<span class="c-string">"\n"</span>);
    }
    
    <span class="c-comment">// 也可以这样访问</span>
    <span class="c-function">printf</span>(<span class="c-string">"\n另一种访问方式:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"arr[1][2] = %d\n"</span>, arr[<span class="c-number">1</span>][<span class="c-number">2</span>]);
    <span class="c-function">printf</span>(<span class="c-string">"(*array_ptr)[1][2] = %d\n"</span>, (*array_ptr)[<span class="c-number">1</span>][<span class="c-number">2</span>]);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">数组指针的步长</h3>
                    
                    <div class="array-pointer-details">
                        <div class="pointer-step">
                            <h4>1. 数组指针的算术运算</h4>
                            <div class="code-block">
                                <div class="code-block-title">数组指针步长分析</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">int</span> arr[<span class="c-number">3</span>][<span class="c-number">4</span>] = {
        {<span class="c-number">1</span>, <span class="c-number">2</span>, <span class="c-number">3</span>, <span class="c-number">4</span>},
        {<span class="c-number">5</span>, <span class="c-number">6</span>, <span class="c-number">7</span>, <span class="c-number">8</span>},
        {<span class="c-number">9</span>, <span class="c-number">10</span>, <span class="c-number">11</span>, <span class="c-number">12</span>}
    };
    
    <span class="c-keyword">int</span> (*array_ptr)[<span class="c-number">4</span>] = arr;
    
    <span class="c-function">printf</span>(<span class="c-string">"原始数组指针: %p\n"</span>, (void*)array_ptr);
    <span class="c-function">printf</span>(<span class="c-string">"array_ptr + 1: %p\n"</span>, (void*)(array_ptr + <span class="c-number">1</span>));
    <span class="c-function">printf</span>(<span class="c-string">"步长: %d 字节\n"</span>, (char*)(array_ptr + <span class="c-number">1</span>) - (char*)array_ptr);
    <span class="c-function">printf</span>(<span class="c-string">"每个数组的大小: %u 字节\n"</span>, (<span class="c-keyword">unsigned int</span>)<span class="c-keyword">sizeof</span>(arr[<span class="c-number">0</span>]));
    
    <span class="c-comment">// 访问不同行</span>
    <span class="c-function">printf</span>(<span class="c-string">"\n访问各行首元素:\n"</span>);
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < <span class="c-number">3</span>; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"第%d行第一个元素: %d\n"</span>, i, *(*(array_ptr + i)));
    }
    
    <span class="c-comment">// 数组指针和普通指针的区别</span>
    <span class="c-keyword">int</span> *normal_ptr = arr[<span class="c-number">0</span>];  <span class="c-comment">// 指向int</span>
    <span class="c-function">printf</span>(<span class="c-string">"\n普通指针:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"normal_ptr: %p\n"</span>, (void*)normal_ptr);
    <span class="c-function">printf</span>(<span class="c-string">"normal_ptr + 1: %p\n"</span>, (void*)(normal_ptr + <span class="c-number">1</span>));
    <span class="c-function">printf</span>(<span class="c-string">"步长: %d 字节\n"</span>, (char*)(normal_ptr + <span class="c-number">1</span>) - (char*)normal_ptr);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </div>

                        <div class="pointer-step">
                            <h4>2. 多维数组作为函数参数</h4>
                            <div class="code-block">
                                <div class="code-block-title">数组指针作为函数参数</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-comment">// 使用数组指针作为参数</span>
<span class="c-keyword">void</span> <span class="c-function">print_matrix</span>(<span class="c-keyword">int</span> (*matrix)[<span class="c-number">4</span>], <span class="c-keyword">int</span> rows) {
    <span class="c-function">printf</span>(<span class="c-string">"矩阵内容:\n"</span>);
    <span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; rows; i++) {
        <span class="c-keyword">for</span> (j = <span class="c-number">0</span>; j &lt; <span class="c-number">4</span>; j++) {
            <span class="c-function">printf</span>(<span class="c-string">"%d "</span>, *(*(matrix + i) + j));
        }
        <span class="c-function">printf</span>(<span class="c-string">"\n"</span>);
    }
}

<span class="c-comment">// 计算矩阵每行之和</span>
<span class="c-keyword">void</span> <span class="c-function">row_sums</span>(<span class="c-keyword">int</span> (*matrix)[<span class="c-number">4</span>], <span class="c-keyword">int</span> rows, <span class="c-keyword">int</span> *sums) {
    <span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; rows; i++) {
        sums[i] = <span class="c-number">0</span>;
        <span class="c-keyword">for</span> (j = <span class="c-number">0</span>; j &lt; <span class="c-number">4</span>; j++) {
            sums[i] += *(*(matrix + i) + j);
        }
    }
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">int</span> matrix[<span class="c-number">3</span>][<span class="c-number">4</span>] = {
        {<span class="c-number">1</span>, <span class="c-number">2</span>, <span class="c-number">3</span>, <span class="c-number">4</span>},
        {<span class="c-number">5</span>, <span class="c-number">6</span>, <span class="c-number">7</span>, <span class="c-number">8</span>},
        {<span class="c-number">9</span>, <span class="c-number">10</span>, <span class="c-number">11</span>, <span class="c-number">12</span>}
    };
    
    print_matrix(matrix, <span class="c-number">3</span>);
    
    <span class="c-keyword">int</span> sums[<span class="c-number">3</span>];
    row_sums(matrix, <span class="c-number">3</span>, sums);
    
    <span class="c-function">printf</span>(<span class="c-string">"\n各行和:\n"</span>);
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < <span class="c-number">3</span>; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"第%d行: %d\n"</span>, i + <span class="c-number">1</span>, sums[i]);
    }
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：数组指针操作二维数组</h3>
                    <div class="question-item">
                        <p><strong>练习3：</strong> 使用数组指针访问3×3整型二维数组，编写函数计算对角线元素之和（主对角线和副对角线）。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">对角线求和</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">diagonal_sum</span>(<span class="c-keyword">int</span> (*arr)[<span class="c-number">3</span>], <span class="c-keyword">int</span> size) {
    <span class="c-keyword">int</span> main_sum = <span class="c-number">0</span>, sub_sum = <span class="c-number">0</span>;
    <span class="c-keyword">for</span> (i =<span class="c-number">0</span>; i&lt;size; i++) {
        main_sum += arr[i][i];              <span class="c-comment">// 主对角线</span>
        sub_sum += arr[i][size<span class="c-number">-1</span>-i];      <span class="c-comment">// 副对角线</span>
    }
    <span class="c-keyword">return</span> main_sum + sub_sum;
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> matrix[<span class="c-number">3</span>][<span class="c-number">3</span>] = {{<span class="c-number">1</span>,<span class="c-number">2</span>,<span class="c-number">3</span>}, {<span class="c-number">4</span>,<span class="c-number">5</span>,<span class="c-number">6</span>}, {<span class="c-number">7</span>,<span class="c-number">8</span>,<span class="c-number">9</span>}};

    <span class="c-keyword">int</span> sum = diagonal_sum(matrix, <span class="c-number">3</span>);
    <span class="c-function">printf</span>(<span class="c-string">"对角线元素之和: %d\n"</span>, sum);

    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">实际应用：动态二维数组</h3>
                    <div class="code-block">
                        <div class="code-block-title">动态分配的二维数组</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;stdlib.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i, j;
    <span class="c-keyword">int</span> rows = <span class="c-number">3</span>, cols = <span class="c-number">4</span>;
    
    <span class="c-comment">// 方法1: 数组指针方式</span>
    <span class="c-keyword">int</span> (*dynamic_matrix)[<span class="c-number">4</span>] = (<span class="c-keyword">int</span>(*)[<span class="c-number">4</span>])malloc(rows * <span class="c-keyword">sizeof</span>(<span class="c-keyword">int</span>[<span class="c-number">4</span>]));
    
    <span class="c-keyword">if</span> (dynamic_matrix == NULL) {
        <span class="c-function">printf</span>(<span class="c-string">"内存分配失败\n"</span>);
        <span class="c-keyword">return</span> <span class="c-number">1</span>;
    }
    
    <span class="c-comment">// 初始化动态二维数组</span>
    <span class="c-keyword">int</span> <span class="c-keyword">for</span> (i =/span>(<span class="c-keyword">int</span> i = <span class="c-n<span class="c-keyword">for</span> (j =/span>(<span class="c-keyword">int</span> j = <span class="c-number">0</span>; j &lt; cols; j++) {
            *(*(dynamic_matrix + i) + j) = value++;
        }
    }
    
    <span class="c-function">printf</span>(<sp<span class="c-keyword">for</span> (i =/span>(<span class="c-keyword">int</span> i = <span class="c-n<span class="c-keyword">for</span> (j =/span>(<span class="c-keyword">int</span> j = <span class="c-number">0</span>; j &lt; cols; j++) {
            <span class="c-function">printf</span>(<span class="c-string">"%d "</span>, *(*(dynamic_matrix + i) + j));
        }
        <span class="c-function">printf</span>(<span class="c-string">"\n"</span>);
    }
    
    free(dynamic_matrix);
    <span class="c-function">printf</span>(<span class="c-string">"内存已释放\n"</span>);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>
            </section>
            <section id="function-pointer" class="section">
                <h2 class="section-title">函数指针</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">什么是函数指针？</h3>
                    <div class="subsection-content">
                        <h4>核心概念</h4>
                        <p>函数指针（Function Pointer）是指向函数的指针变量。C语言中，函数名本身代表函数的入口地址，我们可以用指针存储这个地址，然后通过指针调用函数。</p>
                        
                        <div class="callout-tip">
                            <strong>🔍 函数指针的内存存储原理：</strong>
                            <ul>
                                <li><strong>函数在内存中的存储：</strong>
                                    <ul>
                                        <li>编译后的程序包含两个主要区域：代码段（.text）和数据段（.data/.bss）</li>
                                        <li>函数的机器代码存储在代码段中，有一个固定的起始地址（入口地址）</li>
                                        <li>这个入口地址在程序加载后就确定了，运行期间不会改变</li>
                                        <li>代码段通常是只读的，防止程序意外修改自己的指令</li>
                                    </ul>
                                </li>
                                <li><strong>函数名的本质：</strong>
                                    <ul>
                                        <li>函数名是一个<strong>地址常量</strong>，代表函数代码的起始位置</li>
                                        <li>与数组名类似，函数名在大多数上下文中自动转换为指向函数的指针</li>
                                        <li>因此 <code>func</code> 和 <code>&func</code> 在C语言中是等价的</li>
                                    </ul>
                                </li>
                                <li><strong>函数指针变量的存储：</strong>
                                    <ul>
                                        <li>函数指针变量本身（如 <code>func_ptr</code>）存储在栈或数据段中</li>
                                        <li>它的值是一个地址，指向代码段中某个函数的入口</li>
                                        <li>在32位系统中占4字节，64位系统中占8字节</li>
                                    </ul>
                                </li>
                                <li><strong>(*func_ptr)() 和 func_ptr() 的区别：</strong>
                                    <ul>
                                        <li><strong>汇编层面：</strong>两者生成相同的机器代码，都是 CALL 指令跳转到地址</li>
                                        <li><code>func_ptr()</code> - 编译器隐式识别为函数指针调用</li>
                                        <li><code>(*func_ptr)()</code> - 显式解引用，但因为函数名即地址，解引用后仍是地址</li>
                                        <li>C标准允许两种写法，现代代码更推荐简洁的 <code>func_ptr()</code></li>
                                    </ul>
                                </li>
                                <li><strong>调用过程（底层机制）：</strong>
                                    <ul>
                                        <li>1. 从指针变量读取目标函数的地址</li>
                                        <li>2. 将参数压入栈（或放入寄存器）</li>
                                        <li>3. 执行 CALL 指令，跳转到目标地址</li>
                                        <li>4. 保存返回地址到栈，执行函数代码</li>
                                        <li>5. 函数返回时，从栈恢复返回地址并跳回</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="callout-tip">
                            <p><strong>声明语法：</strong></p>
                            <pre>返回类型 (*指针名)(参数类型列表);</pre>
                            <p>例如：</p>
                            <ul>
                                <li><code>int (*func_ptr)(int, int);</code> - 指向返回int、接受两个int参数的函数</li>
                                <li><code>void (*handler)(void);</code> - 指向无参数无返回值的函数</li>
                                <li><code>double (*math_func)(double);</code> - 指向数学函数的指针</li>
                            </ul>
                        </div>

                        <h4>理解声明的关键</h4>
                        <div class="callout-tip">
                            <p><strong>如何读懂 <code>int (*func_ptr)(int, int)</code>？</strong></p>
                            <ol>
                                <li><code>*func_ptr</code> - 括号内，func_ptr首先是一个指针</li>
                                <li><code>(int, int)</code> - 这个指针指向的是一个函数，函数接受两个int参数</li>
                                <li><code>int</code> - 函数返回int类型</li>
                            </ol>
                            <p><strong>结论：</strong>func_ptr是一个指针，指向返回int并接受两个int参数的函数。</p>
                        </div>

                        <h4>为什么需要函数指针？</h4>
                        <ul>
                            <li><strong>回调函数</strong>：作为参数传递给其他函数，实现回调机制</li>
                            <li><strong>函数表</strong>：构建函数指针数组，实现菜单系统、状态机等</li>
                            <li><strong>动态绑定</strong>：运行时选择要调用的函数</li>
                            <li><strong>插件系统</strong>：动态加载和调用外部函数</li>
                            <li><strong>通用算法</strong>：如qsort函数使用函数指针作为比较器</li>
                        </ul>

                        <h4>函数指针的使用方式</h4>
                        <div class="callout-tip">
                            <p><strong>1. 赋值</strong></p>
                            <pre><code>int (*ptr)(int, int);
ptr = add;           // 函数名就是地址
ptr = &add;          // 也可以显式取地址，效果相同</code></pre>
                            
                            <p><strong>2. 调用</strong></p>
                            <pre><code>int result = ptr(3, 5);      // 直接通过指针调用
int result = (*ptr)(3, 5);   // 显式解引用调用，效果相同</code></pre>
                            
                            <p><strong>3. 作为参数传递</strong></p>
                            <pre><code>void sort(int arr[], int n, int (*cmp)(int, int)) {
    // 使用cmp比较函数
}</code></pre>
                        </div>

                        <h4>函数指针 vs 普通指针</h4>
                        <div class="callout-warning">
                            <p><strong>⚠️ 重要区别：</strong></p>
                            <ul>
                                <li><strong>普通指针</strong>：指向数据（变量），可以修改指向的数据</li>
                                <li><strong>函数指针</strong>：指向代码（函数），通过它调用函数执行代码</li>
                                <li>函数指针不能用于读写内存，只能用于函数调用</li>
                                <li>函数名本身就代表地址，不需要&运算符（虽然加上也不错）</li>
                            </ul>
                        </div>

                        <h4>常见应用场景</h4>
                        <div class="callout-tip">
                            <p><strong>1. 回调函数</strong></p>
                            <p>将函数指针作为参数传递，让被调函数在适当时机回调这个函数。</p>
                            
                            <p><strong>2. 函数指针数组（函数表）</strong></p>
                            <p>将多个函数指针组织成数组，可以通过索引快速选择并调用对应函数。</p>
                            
                            <p><strong>3. qsort和bsearch</strong></p>
                            <p>标准库的排序和搜索函数使用函数指针作为比较器，实现通用算法。</p>
                        </div>

                        <div class="callout-note">
                            <strong>初学者提示：</strong>
                            <ul>
                                <li>括号是必需的！<code>int *func(int)</code> 是返回int指针的函数，不是函数指针</li>
                                <li>函数指针的参数类型必须完全匹配</li>
                                <li>调用时可以用 <code>ptr()</code> 也可以用 <code>(*ptr)()</code>，推荐前者更简洁</li>
                                <li>typedef可以简化函数指针的声明</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">指向函数的指针</h3>
                    <div class="code-block">
                    <div class="code-block-title">函数指针示例</div>
                    <pre><code><span class="c-comment">// 函数指针：指向函数的指针</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-comment">// 普通函数</span>
<span class="c-keyword">int</span> <span class="c-function">add</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) {
    <span class="c-keyword">return</span> a + b;
}

<span class="c-keyword">int</span> <span class="c-function">multiply</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) {
    <span class="c-keyword">return</span> a * b;
}

<span class="c-keyword">int</span> <span class="c-function">subtract</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) {
    <span class="c-keyword">return</span> a - b;
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-comment">// 函数指针声明</span>
    <span class="c-keyword">int</span> (*func_ptr)(<span class="c-keyword">int</span>, <span class="c-keyword">int</span>);
    
    <span class="c-comment">// 指向不同函数</span>
    func_ptr = add;
    <span class="c-function">printf</span>(<span class="c-string">"3 + 5 = %d\n"</span>, func_ptr(<span class="c-number">3</span>, <span class="c-number">5</span>));
    
    func_ptr = multiply;
    <span class="c-function">printf</span>(<span class="c-string">"3 * 5 = %d\n"</span>, func_ptr(<span class="c-number">3</span>, <span class="c-number">5</span>));
    
    func_ptr = subtract;
    <span class="c-function">printf</span>(<span class="c-string">"10 - 3 = %d\n"</span>, func_ptr(<span class="c-number">10</span>, <span class="c-number">3</span>));
    
    <span class="c-comment">// 函数指针数组</span>
    <span class="c-keyword">int</span> (*func_array[<span class="c-number">3</span>])(<span class="c-keyword">int</span>, <span class="c-keyword">int</span>) = {add, multiply, subtract};
    
    <span class="c-function">printf</span>(<span class="c-string">"\n函数指针数组调用:\n"</span>);
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < <span class="c-number">3</span>; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"func_array[%d](4, 2) = %d\n"</span>, i, func_array[i](<span class="c-number">4</span>, <span class="c-number">2</span>));
    }
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：函数指针切换操作</h3>
                    <div class="question-item">
                        <p><strong>练习4：</strong> 定义加减乘除四个函数，使用函数指针数组存储它们，根据用户输入的运算符选择对应函数执行计算。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">简易四则运算</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">add</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> a+b; }
<span class="c-keyword">int</span> <span class="c-function">sub</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> a-b; }
<span class="c-keyword">int</span> <span class="c-function">mul</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> a*b; }
<span class="c-keyword">int</span> <span class="c-function">divide</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> b!=<span class="c-number">0</span> ? a/b : <span class="c-number">0</span>; }

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">int</span> (*ops[<span class="c-number">4</span>])(<span class="c-keyword">int</span>, <span class="c-keyword">int</span>) = {add, sub, mul, divide};
    <span class="c-keyword">char</span> symbols[] = {<span class="c-string">'+'</span>, <span class="c-string">'-'</span>, <span class="c-string">'*'</span>, <span class="c-string">'/'</span>};

    <span class="c-keyword">int</span> a=<span class="c-number">10</span<span class="c-keyword">for</span> (i =pan>(<span class="c-keyword">int</span> i=<span class="c-number">0</span>; i&lt;<span class="c-number">4</span>; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"%d %c %d = %d\n"</span>, a, symbols[i], b, ops[i](a, b));
    }

    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">函数指针的高级用法</h3>
                    
                    <div class="function-pointer-advanced">
                        <div class="func-ptr-usage">
                            <h4>1. 函数指针作为函数参数</h4>
                            <div class="code-block">
                                <div class="code-block-title">回调函数模式</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-comment">// 比较函数类型</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">int</span> (*CompareFunc)(<span class="c-keyword">int</span>, <span class="c-keyword">int</span>);

<span class="c-comment">// 升序比较</span>
<span class="c-keyword">int</span> <span class="c-function">ascending</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) {
    <span class="c-keyword">return</span> a - b;
}

<span class="c-comment">// 降序比较</span>
<span class="c-keyword">int</span> <span class="c-function">descending</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) {
    <span class="c-keyword">return</span> b - a;
}

<span class="c-comment">// 冒泡排序函数，接受比较函数作为参数</span>
<span class="c-keyword">void</span> <span class="c-function">bubble_sort</span>(<span class="c-keyword">int</span> arr[], <span class="c-keyword">int</span> size, CompareFunc compare) {
    <span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; size - <span class="c-number">1</span>; i++) {
        <span class="c-keyword">for</span> (j = <span class="c-number">0</span>; j &lt; size - i - <span class="c-number">1</span>; j++) {
            <span class="c-keyword">if</span> (compare(arr[j], arr[j + <span class="c-number">1</span>]) &gt; <span class="c-number">0</span>) {
                <span class="c-comment">// 交换</span>
                <span class="c-keyword">int</span> temp = arr[j];
                arr[j] = arr[j + <span class="c-number">1</span>];
                arr[j + <span class="c-number">1</span>] = temp;
            }
        }
    }
}

<span class="c-keyword">void</span> <span class="c-function">print_array</span>(<span class="c-keyword">int</span> arr[], <span class="c-keyword">int</span> size) {
    <span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; size; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"%d "</span>, arr[i]);
    }
    <span class="c-function">printf</span>(<span class="c-string">"\n"</span>);
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> numbers[] = {<span class="c-number">64</span>, <span class="c-number">34</span>, <span class="c-number">25</span>, <span class="c-number">12</span>, <span class="c-number">22</span>, <span class="c-number">11</span>, <span class="c-number">90</span>};
    <span class="c-keyword">int</span> size = <span class="c-keyword">sizeof</span>(numbers) / <span class="c-keyword">sizeof</span>(numbers[<span class="c-number">0</span>]);
    
    <span class="c-function">printf</span>(<span class="c-string">"原始数组: "</span>);
    print_array(numbers, size);
    
    <span class="c-comment">// 升序排序</span>
    bubble_sort(numbers, size, ascending);
    <span class="c-function">printf</span>(<span class="c-string">"升序排序: "</span>);
    print_array(numbers, size);
    
    <span class="c-comment">// 降序排序</span>
    bubble_sort(numbers, size, descending);
    <span class="c-function">printf</span>(<span class="c-string">"降序排序: "</span>);
    print_array(numbers, size);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </div>

                        <div class="func-ptr-usage">
                            <h4>2. 函数指针返回值</h4>
                            <div class="code-block">
                                <div class="code-block-title">返回函数指针的函数</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-comment">// 数学运算函数</span>
<span class="c-keyword">int</span> <span class="c-function">add</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> a + b; }
<span class="c-keyword">int</span> <span class="c-function">multiply</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> a * b; }
<span class="c-keyword">int</span> <span class="c-function">subtract</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> a - b; }
<span class="c-keyword">int</span> <span class="c-function">divide</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> b != <span class="c-number">0</span> ? a / b : <span class="c-number">0</span>; }

<span class="c-comment">// 返回函数指针的函数</span>
<span class="c-keyword">int</span> (*<span class="c-function">get_operation</span>(<span class="c-keyword">char</span> op))(<span class="c-keyword">int</span>, <span class="c-keyword">int</span>) {
    <span class="c-keyword">switch</span>(op) {
        <span class="c-keyword">case</span> <span class="c-string">'+'</span>: <span class="c-keyword">return</span> add;
        <span class="c-keyword">case</span> <span class="c-string">'-'</span>: <span class="c-keyword">return</span> subtract;
        <span class="c-keyword">case</span> <span class="c-string">'*'</span>: <span class="c-keyword">return</span> multiply;
        <span class="c-keyword">case</span> <span class="c-string">'/'</span>: <span class="c-keyword">return</span> divide;
        <span class="c-keyword">default</span>: <span class="c-keyword">return</span> NULL;
    }
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">int</span> a = <span class="c-number">20</span>, b = <span class="c-number">4</span>;
    <span class="c-keyword">char</span> operations[] = {<span class="c-string">'+'</span>, <span class="c-string">'-'</span>, <span class="c-string">'*'</span>, <span class="c-string">'/'</span>};
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < <span class="c-number">4</span>; i++) {
        <span class="c-keyword">int</span> (*operation)(<span class="c-keyword">int</span>, <span class="c-keyword">int</span>) = get_operation(operations[i]);
        <span class="c-keyword">if</span> (operation != NULL) {
            <span class="c-function">printf</span>(<span class="c-string">"%d %c %d = %d\n"</span>, a, operations[i], b, operation(a, b));
        }
    }
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">实际应用：简单计算器</h3>
                    <div class="code-block">
                        <div class="code-block-title">函数指针实现的计算器</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-comment">// 运算函数声明</span>
<span class="c-keyword">double</span> <span class="c-function">add</span>(<span class="c-keyword">double</span> a, <span class="c-keyword">double</span> b) { <span class="c-keyword">return</span> a + b; }
<span class="c-keyword">double</span> <span class="c-function">subtract</span>(<span class="c-keyword">double</span> a, <span class="c-keyword">double</span> b) { <span class="c-keyword">return</span> a - b; }
<span class="c-keyword">double</span> <span class="c-function">multiply</span>(<span class="c-keyword">double</span> a, <span class="c-keyword">double</span> b) { <span class="c-keyword">return</span> a * b; }
<span class="c-keyword">double</span> <span class="c-function">divide</span>(<span class="c-keyword">double</span> a, <span class="c-keyword">double</span> b) { 
    <span class="c-keyword">return</span> b != <span class="c-number">0.0</span> ? a / b : <span class="c-number">0.0</span>; 
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">double</span> (*operations[<span class="c-number">4</span>])(<span class="c-keyword">double</span>, <span class="c-keyword">double</span>) = {add, subtract, multiply, divide};
    <span class="c-keyword">char</span> operators[<span class="c-number">4</span>] = {<span class="c-string">'+'</span>, <span class="c-string">'-'</span>, <span class="c-string">'*'</span>, <span class="c-string">'/'</span>};
    
    <span class="c-function">printf</span>(<span class="c-string">"简单计算器\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"============\n"</span>);
    
    <span class="c-keyword">double</span> num1, num2;
    <span class="c-keyword">char</span> op;
    
    <span class="c-function">printf</span>(<span class="c-string">"输入第一个数字: "</span>);
    <span class="c-function">scanf</span>(<span class="c-string">"%lf"</span>, &amp;num1);
    
    <span class="c-function">printf</span>(<span class="c-string">"输入运算符 (+, -, *, /): "</span>);
    <span class="c-function">scanf</span>(<span class="c-string">" %c"</span>, &amp;op);
    
    <span class="c-function">printf</span>(<span class="c-string">"输入第二个数字: "</span>);
    <span class="c-function">scanf</span>(<span class="c-string">"%lf"</span>, &amp;num2);
    
    <span class="c-comment">// 查找对应的运算</span>
    <span class="c-keyword">int</span> op_index = -<span class="c-number">1</span>;
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < <span class="c-number">4</span>; i++) {
        <span class="c-keyword">if</span> (operators[i] == op) {
            op_index = i;
            <span class="c-keyword">break</span>;
        }
    }
    
    <span class="c-keyword">if</span> (op_index != -<span class="c-number">1</span>) {
        <span class="c-keyword">double</span> result = operations[op_index](num1, num2);
        <span class="c-function">printf</span>(<span class="c-string">"%.2f %c %.2f = %.2f\n"</span>, num1, op, num2, result);
    } <span class="c-keyword">else</span> {
        <span class="c-function">printf</span>(<span class="c-string">"无效的运算符\n"</span>);
    }
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：回调函数应用</h3>
                    <div class="question-item">
                        <p><strong>练习5：</strong> 编写一个通用排序函数，接受整型数组和比较函数指针参数，可根据传入的比较函数实现升序或降序排序。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">回调函数排序</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">int</span> <span class="c-function">asc</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> a &gt; b; }
<span class="c-keyword">int</span> <span class="c-function">desc</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> a &lt; b; }

<span class="c-keyword">void</span> <span class="c-function">sort</span>(<span class="c-keyword">int</span> arr[], <span class="c-keyword">int</span> n, <span class="c-keyword">int</span> (*cmp)(<span class="c-keyword">int</span>, <span class="c-keyword">int</span>)) {
    <span class="c-keyword">for</span> (i =<span class="c-number">0</span>; i&lt;n<span class="c-number">-1</span>; i++) {
        <span class="c-keyword">for</span> (j =<span class="c-number">0</span>; j&lt;n<span class="c-number">-1</span>-i; j++) {
            <span class="c-keyword">if</span>(cmp(arr[j], arr[j+<span class="c-number">1</span>])) {
                <span class="c-keyword">int</span> t = arr[j]; arr[j]=arr[j+<span class="c-number">1</span>]; arr[j+<span class="c-number">1</span>]=t;
            }
        }
    }
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">int</span> data[] = {<span class="c-number">5</span>,<span class="c-number">2</span>,<span class="c-number">8</span>,<span class="c-number">1</span>,<span class="c-number">9</span>};
    <span class="c-keyword">int</span> n = <span class="c-number">5</span>;

    sort(data, n, asc);
    <span class="c-function">printf</span>(<<span class="c-keyword">for</span> (i =pan>(<span class="c-keyword">int</span> i=<span class="c-number">0</span>; i&lt;n; i++) <span class="c-function">printf</span>(<span class="c-string">"%d "</span>, data[i]);

    sort(data, n, desc);
    <span class="c-function">printf</span>(<sp<span class="c-keyword">for</span> (i =pan>(<span class="c-keyword">int</span> i=<span class="c-number">0</span>; i&lt;n; i++) <span class="c-function">printf</span>(<span class="c-string">"%d "</span>, data[i]);
    <span class="c-function">printf</span>(<span class="c-string">"\n"</span>);

    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>
            </section>

            <!-- 结构体基础 -->
            <section id="struct-basic" class="section">
                <h2 class="section-title">结构体基础</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">什么是结构体？</h3>
                    <div class="subsection-content">
                        <h4>核心概念</h4>
                        <p>结构体（Structure）是C语言中用于组合多个不同类型数据的复合数据类型。可以把结构体理解为一个"数据容器"，里面可以装不同类型的相关数据。</p>
                        
                        <div class="callout-tip">
                            <p><strong>结构体的价值：</strong></p>
                            <ul>
                                <li><strong>组织相关数据</strong>：将相关的不同类型数据组合在一起</li>
                                <li><strong>表达现实概念</strong>：更自然地描述现实世界的对象（学生、书籍、坐标等）</li>
                                <li><strong>简化数据管理</strong>：统一管理相关数据，避免使用多个独立变量</li>
                                <li><strong>作为函数参数</strong>：可以一次传递多个相关数据</li>
                            </ul>
                        </div>

                        <h4>定义语法</h4>
                        <div class="callout-tip">
                            <p><strong>基本语法：</strong></p>
                            <pre><code>struct 结构体名 {
    成员类型1 成员名1;
    成员类型2 成员名2;
    ...
};</code></pre>
                            <p>例如，定义一个学生结构体：</p>
                            <pre><code>struct Student {
    char name[50];    // 姓名
    int age;          // 年龄
    float score;      // 成绩
};</code></pre>
                        </div>

                        <h4>为什么需要结构体？</h4>
                        <div class="callout-tip">
                            <p><strong>对比思考：</strong></p>
                            <p>不使用结构体时：</p>
                            <pre><code>char student1_name[50];
int student1_age;
float student1_score;

char student2_name[50];
int student2_age;
float student2_score;  // 很混乱！</code></pre>
                            <p>使用结构体后：</p>
                            <pre><code>struct Student student1;
struct Student student2;  // 清晰明了！</code></pre>
                        </div>

                        <h4>访问结构体成员</h4>
                        <div class="callout-tip">
                            <p><strong>两种访问方式：</strong></p>
                            <ul>
                                <li><strong>点运算符（.）</strong>：用于结构体变量<br>
                                    <code>student.name = "张三";</code></li>
                                <li><strong>箭头运算符（->）</strong>：用于结构体指针<br>
                                    <code>ptr->name = "张三";  // 等价于 (*ptr).name</code></li>
                            </ul>
                        </div>

                        <h4>结构体的初始化</h4>
                        <div class="callout-tip">
                            <p><strong>三种初始化方式：</strong></p>
                            <pre><code>// 方式1：定义时初始化
struct Student s1 = {"张三", 20, 95.5};

// 方式2：逐个赋值
struct Student s2;
strcpy(s2.name, "李四");
s2.age = 19;
s2.score = 88.0;

// 方式3：指定成员初始化（C99）
struct Student s3 = {.name = "王五", .score = 92.0, .age = 21};</code></pre>
                        </div>

                        <h4>结构体的内存布局</h4>
                        <div class="callout-warning">
                            <p><strong>⚠️ 内存对齐：</strong></p>
                            <p>结构体成员在内存中可能不是紧密排列的，编译器会为了提高访问效率而进行内存对齐：</p>
                            <ul>
                                <li>结构体的大小 ≥ 所有成员大小之和</li>
                                <li>编译器可能在成员之间插入填充字节</li>
                                <li>使用 <code>sizeof(struct Student)</code> 获取实际大小</li>
                            </ul>
                        </div>

                        <h4>实际应用场景</h4>
                        <div class="callout-tip">
                            <p><strong>1. 表示复杂对象</strong></p>
                            <p>学生、员工、商品、坐标点等现实世界的对象</p>
                            
                            <p><strong>2. 数据库记录</strong></p>
                            <p>每条记录用一个结构体表示，多条记录用结构体数组</p>
                            
                            <p><strong>3. 链表节点</strong></p>
                            <p>结构体中包含指向下一个节点的指针，构建链表</p>
                            
                            <p><strong>4. 函数返回多个值</strong></p>
                            <p>将多个返回值封装在结构体中返回</p>
                        </div>

                        <div class="callout-note">
                            <strong>初学者提示：</strong>
                            <ul>
                                <li>结构体定义后面的分号不要忘记</li>
                                <li><code>struct Student s;</code> 中 struct 关键字不能省略（除非用typedef）</li>
                                <li>字符串成员要用strcpy赋值，不能用=</li>
                                <li>结构体可以赋值：<code>s1 = s2;</code> 会复制所有成员</li>
                                <li>结构体指针用->访问成员，普通变量用.访问成员</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">结构体的定义和使用</h3>
                    <div class="code-block">
                    <div class="code-block-title">结构体示例</div>
                    <pre><code><span class="c-comment">// 结构体：自定义数据类型</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;string.h&gt;</span>

<span class="c-comment">// 结构体定义</span>
<span class="c-keyword">struct</span> Student {
    <span class="c-keyword">char</span> name[<span class="c-number">50</span>];
    <span class="c-keyword">int</span> age;
    <span class="c-keyword">float</span> score;
};

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-comment">// 结构体变量定义和初始化</span>
    <span class="c-keyword">struct</span> Student s1 = {<span class="c-string">"张三"</span>, <span class="c-number">20</span>, <span class="c-number">95.5</span>};
    <span class="c-keyword">struct</span> Student s2;
    
    <span class="c-comment">// 访问结构体成员</span>
    <span class="c-function">printf</span>(<span class="c-string">"学生1: %s, 年龄%d, 成绩%.1f\n"</span>, s1.name, s1.age, s1.score);
    
    <span class="c-comment">// 修改结构体成员</span>
    <span class="c-function">strcpy</span>(s2.name, <span class="c-string">"李四"</span>);
    s2.age = <span class="c-number">19</span>;
    s2.score = <span class="c-number">88.0</span>;
    
    <span class="c-function">printf</span>(<span class="c-string">"学生2: %s, 年龄%d, 成绩%.1f\n"</span>, s2.name, s2.age, s2.score);
    
    <span class="c-comment">// 结构体指针</span>
    <span class="c-keyword">struct</span> Student *ptr = &amp;s1;
    <span class="c-function">printf</span>(<span class="c-string">"\n通过指针访问:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"姓名: %s\n"</span>, ptr-&gt;name);
    <span class="c-function">printf</span>(<span class="c-string">"年龄: %d\n"</span>, ptr-&gt;age);
    <span class="c-function">printf</span>(<span class="c-string">"成绩: %.1f\n"</span>, ptr-&gt;score);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：结构体定义与访问</h3>
                    <div class="question-item">
                        <p><strong>练习6：</strong> 定义一个图书结构体（书名、作者、价格），创建结构体变量并初始化，通过点运算符和指针箭头运算符分别访问和修改成员。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">图书结构体</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;string.h&gt;</span>

<span class="c-keyword">struct</span> Book {
    <span class="c-keyword">char</span> title[<span class="c-number">50</span>];
    <span class="c-keyword">char</span> author[<span class="c-number">30</span>];
    <span class="c-keyword">float</span> price;
};

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">struct</span> Book b1 = {<span class="c-string">"C语言程序设计"</span>, <span class="c-string">"谭浩强"</span>, <span class="c-number">39.8</span>};

    <span class="c-function">printf</span>(<span class="c-string">"书名: %s\n"</span>, b1.title);
    <span class="c-function">printf</span>(<span class="c-string">"作者: %s\n"</span>, b1.author);
    <span class="c-function">printf</span>(<span class="c-string">"价格: %.2f\n"</span>, b1.price);

    <span class="c-keyword">struct</span> Book *ptr = &amp;b1;
    ptr-&gt;price = <span class="c-number">45.0</span>;
    <span class="c-function">printf</span>(<span class="c-string">"\n修改后价格: %.2f\n"</span>, ptr-&gt;price);

    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">结构体数组和嵌套</h3>
                    
                    <div class="struct-advanced">
                        <div class="struct-feature">
                            <h4>1. 结构体数组</h4>
                            <div class="code-block">
                                <div class="code-block-title">结构体数组操作</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;string.h&gt;</span>

<span class="c-keyword">struct</span> Student {
    <span class="c-keyword">char</span> name[<span class="c-number">50</span>];
    <span class="c-keyword">int</span> age;
    <span class="c-keyword">float</span> score;
};

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-comment">// 结构体数组</span>
    <span class="c-keyword">struct</span> Student class[<span class="c-number">3</span>] = {
        {<span class="c-string">"张三"</span>, <span class="c-number">20</span>, <span class="c-number">95.5</span>},
        {<span class="c-string">"李四"</span>, <span class="c-number">19</span>, <span class="c-number">88.0</span>},
        {<span class="c-string">"王五"</span>, <span class="c-number">21</span>, <span class="c-number">92.3</span>}
    };
    
    <span class="c-function">printf</span>(<span class="c-string">"学生信息:\n"</span>);
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < <span class="c-number">3</span>; i++) {
        <span class="c-function">printf</span>(<span class="c-string">"学生%d: %s, 年龄%d, 成绩%.1f\n"</span>, 
               i + <span class="c-number">1</span>, class[i].name, class[i].age, class[i].score);
    }
    
    <span class="c-comment">// 计算平均分</span>
    <span class="c-keyword">float</span> total = <span class="c-number">0</span>;
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < <span class="c-number">3</span>; i++) {
        total += class[i].score;
    }
    <span class="c-function">printf</span>(<span class="c-string">"\n班级平均分: %.2f\n"</span>, total / <span class="c-number">3</span>);
    
    <span class="c-comment">// 查找最高分</span>
    <span class="c-keyword">int</span> max_index = <span class="c-number">0</span>;
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">1</span>; i < <span class="c-number">3</span>; i++) {
        <span class="c-keyword">if</span> (class[i].score > class[max_index].score) {
            max_index = i;
        }
    }
    <span class="c-function">printf</span>(<span class="c-string">"最高分学生: %s (%.1f分)\n"</span>, 
           class[max_index].name, class[max_index].score);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </div>

                        <div class="struct-feature">
                            <h4>2. 嵌套结构体</h4>
                            <div class="code-block">
                                <div class="code-block-title">结构体嵌套使用</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;string.h&gt;</span>

<span class="c-comment">// 日期结构体</span>
<span class="c-keyword">struct</span> Date {
    <span class="c-keyword">int</span> year;
    <span class="c-keyword">int</span> month;
    <span class="c-keyword">int</span> day;
};

<span class="c-comment">// 员工结构体（嵌套日期）</span>
<span class="c-keyword">struct</span> Employee {
    <span class="c-keyword">char</span> name[<span class="c-number">50</span>];
    <span class="c-keyword">int</span> id;
    <span class="c-keyword">float</span> salary;
    <span class="c-keyword">struct</span> Date hire_date;
};

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">struct</span> Employee emp = {
        <span class="c-string">"张经理"</span>,
        <span class="c-number">1001</span>,
        <span class="c-number">8500.50</span>,
        {<span class="c-number">2020</span>, <span class="c-number">3</span>, <span class="c-number">15</span>}  <span class="c-comment">// 嵌套初始化</span>
    };
    
    <span class="c-function">printf</span>(<span class="c-string">"员工信息:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"姓名: %s\n"</span>, emp.name);
    <span class="c-function">printf</span>(<span class="c-string">"工号: %d\n"</span>, emp.id);
    <span class="c-function">printf</span>(<span class="c-string">"薪资: %.2f\n"</span>, emp.salary);
    <span class="c-function">printf</span>(<span class="c-string">"入职日期: %d年%d月%d日\n"</span>, 
           emp.hire_date.year, emp.hire_date.month, emp.hire_date.day);
    
    <span class="c-comment">// 修改嵌套结构体成员</span>
    emp.hire_date.year = <span class="c-number">2021</span>;
    <span class="c-function">printf</span>(<span class="c-string">"\n修改后的入职年份: %d年\n"</span>, emp.hire_date.year);
    
    <span class="c-comment">// 结构体指针访问嵌套成员</span>
    <span class="c-keyword">struct</span> Employee *ptr = &amp;emp;
    <span class="c-function">printf</span>(<span class="c-string">"\n通过指针访问:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"薪资: %.2f\n"</span>, ptr-&gt;salary);
    <span class="c-function">printf</span>(<span class="c-string">"入职月份: %d月\n"</span>, ptr-&gt;hire_date.month);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：结构体数组应用</h3>
                    <div class="question-item">
                        <p><strong>练习7：</strong> 创建包含3个学生信息的结构体数组，编写函数计算平均成绩，并找出成绩最高的学生。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">成绩统计</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;string.h&gt;</span>

<span class="c-keyword">struct</span> Student {
    <span class="c-keyword">char</span> name[<span class="c-number">30</span>];
    <span class="c-keyword">float</span> score;
};

<span class="c-keyword">float</span> <span class="c-function">avg</span>(<span class="c-keyword">struct</span> Student arr[], <span class="c-keyword">int</span> n) {
    <span class="c-keyword">float</span> sum=<span class="c-number">0</span>;
    <span class="c-keyword">for</span> (i =<span class="c-number">0</span>; i&lt;n; i++) sum += arr[i].score;
    <span class="c-keyword">return</span> sum/n;
}

<span class="c-keyword">int</span> <span class="c-function">find_top</span>(<span class="c-keyword">struct</span> Student arr[], <span class="c-keyword">int</span> n) {
    <span class="c-keyword">int</span> idx=<span class="c-number">0</span>;
    <span class="c-keyword">for</span> (i =<span class="c-number">1</span>; i&lt;n; i++) {
        <span class="c-keyword">if</span>(arr[i].score &gt; arr[idx].score) idx=i;
    }
    <span class="c-keyword">return</span> idx;
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">struct</span> Student students[] = {
        {<span class="c-string">"张三"</span>, <span class="c-number">85.5</span>}, {<span class="c-string">"李四"</span>, <span class="c-number">92.0</span>}, {<span class="c-string">"王五"</span>, <span class="c-number">78.5</span>}
    };
    <span class="c-keyword">int</span> n = <span class="c-number">3</span>;

    <span class="c-function">printf</span>(<span class="c-string">"平均分: %.2f\n"</span>, avg(students, n));

    <span class="c-keyword">int</span> top = find_top(students, n);
    <span class="c-function">printf</span>(<span class="c-string">"最高分: %s, %.2f\n"</span>, students[top].name, students[top].score);

    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">结构体作为函数参数</h3>
                    <div class="code-block">
                        <div class="code-block-title">结构体传参的三种方式</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;string.h&gt;</span>

<span class="c-keyword">struct</span> Student {
    <span class="c-keyword">char</span> name[<span class="c-number">50</span>];
    <span class="c-keyword">int</span> age;
    <span class="c-keyword">float</span> score;
};

<span class="c-comment">// 方式1: 传值（创建副本，效率低但安全）</span>
<span class="c-keyword">void</span> <span class="c-function">print_student</span>(<span class="c-keyword">struct</span> Student s) {
    <span class="c-function">printf</span>(<span class="c-string">"传值方式: %s, 年龄%d, 成绩%.1f\n"</span>, s.name, s.age, s.score);
}

<span class="c-comment">// 方式2: 传指针（高效，可以修改原结构体）</span>
<span class="c-keyword">void</span> <span class="c-function">update_score</span>(<span class="c-keyword">struct</span> Student *s, <span class="c-keyword">float</span> new_score) {
    s-&gt;score = new_score;
    <span class="c-function">printf</span>(<span class="c-string">"传指针方式: 成绩已更新为%.1f\n"</span>, s-&gt;score);
}

<span class="c-comment">// 方式3: 传引用（C语言不支持，C++支持）</span>
<span class="c-comment">// void print_student_ref(struct Student &s) { // C++语法</span>
<span class="c-comment">//     printf("传引用方式: %s\n", s.name);</span>
<span class="c-comment">// }</span>

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">struct</span> Student s1 = {<span class="c-string">"小明"</span>, <span class="c-number">18</span>, <span class="c-number">85.5</span>};
    
    <span class="c-function">printf</span>(<span class="c-string">"原始数据: %s, 成绩%.1f\n"</span>, s1.name, s1.score);
    
    <span class="c-comment">// 传值调用</span>
    print_student(s1);
    
    <span class="c-comment">// 传指针调用</span>
    update_score(&amp;s1, <span class="c-number">90.0</span>);
    
    <span class="c-function">printf</span>(<span class="c-string">"修改后成绩: %.1f\n"</span>, s1.score);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">实际应用：学生成绩管理系统</h3>
                    <div class="code-block">
                        <div class="code-block-title">完整的结构体应用</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;string.h&gt;</span>

<span class="c-keyword">#define</span> MAX_STUDENTS <span class="c-number">100</span>

<span class="c-keyword">struct</span> Student {
    <span class="c-keyword">char</span> name[<span class="c-number">50</span>];
    <span class="c-keyword">int</span> id;
    <span class="c-keyword">float</span> scores[<span class="c-number">3</span>];  <span class="c-comment">// 三科成绩</span>
    <span class="c-keyword">float</span> average;
};

<span class="c-comment">// 计算平均分</span>
<span class="c-keyword">void</span> <span class="c-function">calculate_average</span>(<span class="c-keyword">struct</span> Student *s) {
    <span class="c-keyword">float</span> sum = <span class="c-number">0</span>;
    <span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; <span class="c-number">3</span>; i++) {
        sum += s-&gt;scores[i];
    }
    s-&gt;average = sum / <span class="c-number">3</span>;
}

<span class="c-comment">// 打印学生信息</span>
<span class="c-keyword">void</span> <span class="c-function">print_student</span>(<span class="c-keyword">struct</span> Student s) {
    <span class="c-function">printf</span>(<span class="c-string">"学号: %d\n"</span>, s.id);
    <span class="c-function">printf</span>(<span class="c-string">"姓名: %s\n"</span>, s.name);
    <span class="c-function">printf</span>(<span class="c-string">"成绩: %.1f, %.1f, %.1f\n"</span>, s.scores[<span class="c-number">0</span>], s.scores[<span class="c-number">1</span>], s.scores[<span class="c-number">2</span>]);
    <span class="c-function">printf</span>(<span class="c-string">"平均分: %.2f\n\n"</span>, s.average);
}

<span class="c-comment">// 查找最高平均分学生</span>
<span class="c-keyword">int</span> <span class="c-function">find_top_student</span>(<span class="c-keyword">struct</span> Student students[], <span class="c-keyword">int</span> count) {
    <span class="c-keyword">int</span> top_index = <span class="c-number">0</span>;
    <span class="c-keyword">for</span> (i = <span class="c-number">1</span>; i &lt; count; i++) {
        <span class="c-keyword">if</span> (students[i].average &gt; students[top_index].average) {
            top_index = i;
        }
    }
    <span class="c-keyword">return</span> top_index;
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-keyword">struct</span> Student students[<span class="c-number">3</span>] = {
        {<span class="c-string">"张三"</span>, <span class="c-number">1001</span>, {<span class="c-number">85.5</span>, <span class="c-number">90.0</span>, <span class="c-number">88.5</span>}},
        {<span class="c-string">"李四"</span>, <span class="c-number">1002</span>, {<span class="c-number">92.0</span>, <span class="c-number">87.5</span>, <span class="c-number">95.0</span>}},
        {<span class="c-string">"王五"</span>, <span class="c-number">1003</span>, {<span class="c-number">78.5</span>, <span class="c-number">82.0</span>, <span class="c-number">85.5</span>}}
    };
    
    <span class="c-keyword">int</span> student_count = <span class="c-number">3</span>;
    
    <span class="c-comment">// 计算每个学生的平均分</span>
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < student_count; i++) {
        calculate_average(&amp;students[i]);
    }
    
    <span class="c-function">printf</span>(<span class="c-string">"学生成绩单:\n"</span>);
    <span class="c-function">printf</span>(<span class="c-string">"----------------------------------------------\n"</span>);
    <span class="c-keyword">for</span> (<span class="c-keyword">int</span> i = <span class="c-number">0</span>; i < student_count; i++) {
        print_student(students[i]);
    }
    
    <span class="c-comment">// 找出成绩最好的学生</span>
    <span class="c-keyword">int</span> top_index = find_top_student(students, student_count);
    <span class="c-function">printf</span>(<span class="c-string">"成绩最好的学生: %s (平均分%.2f)\n"</span>, 
           students[top_index].name, students[top_index].average);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>

                <div class="practice-questions">
                    <h3 class="subsection-title">就地练习：结构体指针参数传递</h3>
                    <div class="question-item">
                        <p><strong>练习8：</strong> 定义一个矩形结构体（长、宽），编写函数通过指针参数修改矩形尺寸并计算面积，对比值传递和指针传递的区别。</p>
                        <details>
                            <summary>参考答案与示例代码</summary>
                            <div class="code-block">
                                <div class="code-block-title">矩形操作</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-keyword">struct</span> Rect {
    <span class="c-keyword">float</span> length;
    <span class="c-keyword">float</span> width;
};

<span class="c-keyword">void</span> <span class="c-function">resize</span>(<span class="c-keyword">struct</span> Rect *r, <span class="c-keyword">float</span> l, <span class="c-keyword">float</span> w) {
    r-&gt;length = l;
    r-&gt;width = w;
}

<span class="c-keyword">float</span> <span class="c-function">area</span>(<span class="c-keyword">struct</span> Rect *r) {
    <span class="c-keyword">return</span> r-&gt;length * r-&gt;width;
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">struct</span> Rect rect = {<span class="c-number">5.0</span>, <span class="c-number">3.0</span>};

    <span class="c-function">printf</span>(<span class="c-string">"初始面积: %.2f\n"</span>, area(&amp;rect));

    resize(&amp;rect, <span class="c-number">10.0</span>, <span class="c-number">6.0</span>);
    <span class="c-function">printf</span>(<span class="c-string">"修改后面积: %.2f\n"</span>, area(&amp;rect));

    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </details>
                    </div>
                </div>
            </section>
            <section id="typedef" class="section">
                <h2 class="section-title">typedef</h2>
                
                <div class="subsection">
                    <h3 class="subsection-title">什么是typedef？</h3>
                    <div class="subsection-content">
                        <h4>核心概念</h4>
                        <p>typedef是C语言的关键字，用于为已有的数据类型定义一个新的名字（别名）。它不创建新类型，只是给现有类型起个更容易理解的名字。</p>
                        
                        <div class="callout-tip">
                            <p><strong>基本语法：</strong></p>
                            <pre>typedef 原类型名 新类型名;</pre>
                            <p>例如：</p>
                            <ul>
                                <li><code>typedef int Integer;</code> - Integer成为int的别名</li>
                                <li><code>typedef unsigned long ULong;</code> - ULong成为unsigned long的别名</li>
                                <li><code>typedef char* String;</code> - String成为char*的别名</li>
                            </ul>
                        </div>

                        <h4>为什么需要typedef？</h4>
                        <ul>
                            <li><strong>提高可读性</strong>：用有意义的名字代替复杂的类型声明</li>
                            <li><strong>简化代码</strong>：特别是简化结构体、函数指针等复杂类型的声明</li>
                            <li><strong>跨平台移植</strong>：通过typedef定义与平台相关的类型，便于移植</li>
                            <li><strong>类型抽象</strong>：隐藏底层实现细节，便于后期修改</li>
                        </ul>

                        <h4>typedef vs #define</h4>
                        <div class="callout-warning">
                            <p><strong>⚠️ 重要区别：</strong></p>
                            <table style="width:100%; border-collapse: collapse;">
                                <tr style="background-color: #f0f0f0;">
                                    <th style="border: 1px solid #ddd; padding: 8px;">特性</th>
                                    <th style="border: 1px solid #ddd; padding: 8px;">typedef</th>
                                    <th style="border: 1px solid #ddd; padding: 8px;">#define</th>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px;">处理阶段</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">编译器处理</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">预处理器替换</td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px;">类型检查</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">有类型检查</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">无类型检查</td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px;">作用域</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">遵循作用域规则</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">全局替换</td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px;">指针声明</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">正确处理</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">可能出错</td>
                                </tr>
                            </table>
                            <p style="margin-top: 10px;"><strong>示例对比：</strong></p>
                            <pre><code>typedef char* String;
String s1, s2;  // 两个都是char*

#define String char*
String s1, s2;  // s1是char*，s2是char！</code></pre>
                        </div>

                        <h4>typedef的常见用法</h4>
                        <div class="callout-tip">
                            <p><strong>1. 基本类型别名</strong></p>
                            <pre><code>typedef unsigned char byte;
typedef unsigned int uint;</code></pre>
                            
                            <p><strong>2. 结构体别名</strong></p>
                            <pre><code>typedef struct Student {
    char name[50];
    int age;
} Student;  // 可以直接用Student，不用写struct Student</code></pre>
                            
                            <p><strong>3. 指针类型别名</strong></p>
                            <pre><code>typedef int* IntPtr;
typedef struct Student* StudentPtr;</code></pre>
                            
                            <p><strong>4. 数组类型别名</strong></p>
                            <pre><code>typedef int Array10[10];  // 10个int的数组类型</code></pre>
                            
                            <p><strong>5. 函数指针别名</strong></p>
                            <pre><code>typedef int (*MathFunc)(int, int);  // 简化函数指针声明</code></pre>
                        </div>

                        <h4>typedef的高级技巧</h4>
                        <div class="callout-tip">
                            <p><strong>技巧1：简化复杂声明</strong></p>
                            <pre><code>// 不用typedef（难读）
int (*func_array[10])(int, int);

// 使用typedef（清晰）
typedef int (*FuncPtr)(int, int);
FuncPtr func_array[10];</code></pre>
                            
                            <p><strong>技巧2：跨平台类型定义</strong></p>
                            <pre><code>#ifdef _WIN32
    typedef __int64 int64_t;
#else
    typedef long long int64_t;
#endif</code></pre>
                            
                            <p><strong>技巧3：函数类型别名</strong></p>
                            <pre><code>typedef void (*EventHandler)(void* sender, void* args);
EventHandler onClick, onKeyPress;</code></pre>
                        </div>

                        <div class="callout-note">
                            <strong>初学者提示：</strong>
                            <ul>
                                <li>typedef不是定义变量，是定义类型别名</li>
                                <li>结构体typedef可以省略struct关键字，更方便</li>
                                <li>复杂类型用typedef可以大大提高代码可读性</li>
                                <li>typedef定义的名字通常首字母大写，以区分普通变量</li>
                                <li>理解原类型，typedef只是给它起别名</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">类型别名定义</h3>
                    <div class="code-block">
                    <div class="code-block-title">typedef示例</div>
                    <pre><code><span class="c-comment">// typedef：为类型定义别名</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-comment">// 基本类型别名</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">int</span> Integer;
<span class="c-keyword">typedef</span> <span class="c-keyword">unsigned</span> <span class="c-keyword">long</span> ULong;
<span class="c-keyword">typedef</span> <span class="c-keyword">char</span>* String;

<span class="c-comment">// 结构体别名</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">struct</span> {
    <span class="c-keyword">int</span> x;
    <span class="c-keyword">int</span> y;
} Point;

<span class="c-comment">// 函数指针别名</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">int</span> (*MathFunc)(<span class="c-keyword">int</span>, <span class="c-keyword">int</span>);

<span class="c-keyword">int</span> <span class="c-function">add</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> a + b; }
<span class="c-keyword">int</span> <span class="c-function">multiply</span>(<span class="c-keyword">int</span> a, <span class="c-keyword">int</span> b) { <span class="c-keyword">return</span> a * b; }

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-comment">// 使用类型别名</span>
    Integer num = <span class="c-number">42</span>;
    ULong big_num = <span class="c-number">1234567890UL</span>;
    String text = <span class="c-string">"Hello World"</span>;
    
    Point p = {<span class="c-number">10</span>, <span class="c-number">20</span>};
    
    <span class="c-function">printf</span>(<span class="c-string">"num: %d\n"</span>, num);
    <span class="c-function">printf</span>(<span class="c-string">"big_num: %lu\n"</span>, big_num);
    <span class="c-function">printf</span>(<span class="c-string">"text: %s\n"</span>, text);
    <span class="c-function">printf</span>(<span class="c-string">"point: (%d, %d)\n"</span>, p.x, p.y);
    
    <span class="c-comment">// 函数指针别名</span>
    MathFunc func = add;
    <span class="c-function">printf</span>(<span class="c-string">"add(3, 4) = %d\n"</span>, func(<span class="c-number">3</span>, <span class="c-number">4</span>));
    
    func = multiply;
    <span class="c-function">printf</span>(<span class="c-string">"multiply(3, 4) = %d\n"</span>, func(<span class="c-number">3</span>, <span class="c-number">4</span>));
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">typedef的高级用法</h3>
                    
                    <div class="typedef-advanced">
                        <div class="typedef-usage">
                            <h4>1. 复杂类型简化</h4>
                            <div class="code-block">
                                <div class="code-block-title">typedef简化复杂类型</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-comment">// 复杂指针类型别名</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">int</span> (*ArrayPtr)[<span class="c-number">10</span>];           <span class="c-comment">// 指向包含10个int的数组的指针</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">int</span> *(*FuncPtr)(<span class="c-keyword">int</span>*, <span class="c-keyword">int</span>);  <span class="c-comment">// 返回int*的函数指针</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">void</span> (*Callback)(<span class="c-keyword">void</span>*);       <span class="c-comment">// 回调函数类型</span>

<span class="c-comment">// 结构体指针别名</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">struct</span> {
    <span class="c-keyword">char</span> name[<span class="c-number">50</span>];
    <span class="c-keyword">int</span> age;
    <span class="c-keyword">float</span> score;
} Student, *StudentPtr;  <span class="c-comment">// 同时定义结构体和指针别名</span>

<span class="c-comment">// 使用别名</span>
<span class="c-keyword">void</span> <span class="c-function">print_student</span>(StudentPtr s) {
    <span class="c-function">printf</span>(<span class="c-string">"学生: %s, 年龄%d, 成绩%.1f\n"</span>, s-&gt;name, s-&gt;age, s-&gt;score);
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-comment">// 使用结构体别名</span>
    Student s1 = {<span class="c-string">"小明"</span>, <span class="c-number">18</span>, <span class="c-number">95.5</span>};
    StudentPtr sp = &amp;s1;
    
    print_student(sp);
    
    <span class="c-comment">// 使用数组指针别名</span>
    <span class="c-keyword">int</span> arr[<span class="c-number">10</span>] = {<span class="c-number">1</span>,<span class="c-number">2</span>,<span class="c-number">3</span>,<span class="c-number">4</span>,<span class="c-number">5</span>,<span class="c-number">6</span>,<span class="c-number">7</span>,<span class="c-number">8</span>,<span class="c-number">9</span>,<span class="c-number">10</span>};
    ArrayPtr ap = &amp;arr;
    
    <span class="c-function">printf</span>(<span class="c-string">"数组第一个元素: %d\n"</span>, (*ap)[<span class="c-number">0</span>]);
    <span class="c-function">printf</span>(<span class="c-string">"数组第五个元素: %d\n"</span>, (*ap)[<span class="c-number">4</span>]);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </div>

                        <div class="typedef-usage">
                            <h4>2. typedef与const结合</h4>
                            <div class="code-block">
                                <div class="code-block-title">常量类型别名</div>
                                <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>

<span class="c-comment">// 常量指针类型</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">const</span> <span class="c-keyword">char</span>* StringConst;     <span class="c-comment">// 指向常量的指针</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">char</span>* <span class="c-keyword">const</span> StringPtrConst;  <span class="c-comment">// 常量指针</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">const</span> <span class="c-keyword">char</span>* <span class="c-keyword">const</span> StringFullConst; <span class="c-comment">// 完全常量</span>

<span class="c-keyword">void</span> <span class="c-function">demo_const_typedef</span>() {
    <span class="c-keyword">char</span> str[] = <span class="c-string">"Hello"</span>;
    <span class="c-keyword">const</span> <span class="c-keyword">char</span> const_str[] = <span class="c-string">"World"</span>;
    
    <span class="c-comment">// StringConst: 可以修改指针，但不能修改指向的内容</span>
    StringConst s1 = str;        <span class="c-comment">// 正确</span>
    StringConst s2 = const_str;  <span class="c-comment">// 正确</span>
    <span class="c-comment">// *s1 = 'X';  // 错误：不能修改内容</span>
    s1 = const_str;              <span class="c-comment">// 正确：可以修改指针</span>
    
    <span class="c-comment">// StringPtrConst: 不能修改指针，但可以修改内容</span>
    StringPtrConst s3 = str;     <span class="c-comment">// 正确</span>
    <span class="c-comment">// StringPtrConst s4 = const_str;  // 错误：不能指向常量</span>
    *s3 = <span class="c-string">'X'</span>;              <span class="c-comment">// 正确：可以修改内容</span>
    <span class="c-comment">// s3 = const_str;  // 错误：不能修改指针</span>
    
    <span class="c-function">printf</span>(<span class="c-string">"str: %s\n"</span>, str);
    <span class="c-function">printf</span>(<span class="c-string">"s1指向: %s\n"</span>, s1);
    <span class="c-function">printf</span>(<span class="c-string">"s3指向: %s\n"</span>, s3);
}

<span class="c-comment">// 结构体常量</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">struct</span> {
    <span class="c-keyword">int</span> id;
    <span class="c-keyword">char</span> name[<span class="c-number">20</span>];
} Person;

<span class="c-keyword">typedef</span> <span class="c-keyword">const</span> Person* PersonConstPtr;

<span class="c-keyword">void</span> <span class="c-function">print_person</span>(PersonConstPtr p) {
    <span class="c-function">printf</span>(<span class="c-string">"ID: %d, Name: %s\n"</span>, p-&gt;id, p-&gt;name);
    <span class="c-comment">// 不能修改p指向的内容</span>
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    demo_const_typedef();
    
    Person p = {<span class="c-number">1001</span>, <span class="c-string">"张三"</span>};
    print_person(&amp;p);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">实际应用：类型安全和代码简化</h3>
                    <div class="code-block">
                        <div class="code-block-title">typedef在大型项目中的应用</div>
                        <pre><code><span class="c-keyword">#include</span> <span class="c-string">&lt;stdio.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;stdlib.h&gt;</span>
<span class="c-keyword">#include</span> <span class="c-string">&lt;string.h&gt;</span>

<span class="c-comment">// 项目中常用的类型别名</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">unsigned</span> <span class="c-keyword">char</span> Byte;
<span class="c-keyword">typedef</span> <span class="c-keyword">unsigned</span> <span class="c-keyword">int</span> UInt;
<span class="c-keyword">typedef</span> <span class="c-keyword">long</span> <span class="c-keyword">long</span> LongLong;
<span class="c-keyword">typedef</span> <span class="c-keyword">enum</span> {FALSE, TRUE} Bool;

<span class="c-comment">// 回调函数类型</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">void</span> (*EventHandler)(<span class="c-keyword">void</span>* sender, <span class="c-keyword">void</span>* args);
<span class="c-keyword">typedef</span> <span class="c-keyword">int</span> (*Comparator)(<span class="c-keyword">const</span> <span class="c-keyword">void</span>*, <span class="c-keyword">const</span> <span class="c-keyword">void</span>*);

<span class="c-comment">// 数据结构</span>
<span class="c-keyword">typedef</span> <span class="c-keyword">struct</span> Node {
    <span class="c-keyword">void</span>* data;
    <span class="c-keyword">struct</span> Node* next;
} Node, *NodePtr;

<span class="c-keyword">typedef</span> <span class="c-keyword">struct</span> {
    NodePtr head;
    UInt size;
    Comparator compare;
} LinkedList;

<span class="c-comment">// 链表操作函数</span>
LinkedList* <span class="c-function">list_create</span>(Comparator cmp) {
    LinkedList* list = (LinkedList*)malloc(<span class="c-keyword">sizeof</span>(LinkedList));
    list-&gt;head = NULL;
    list-&gt;size = <span class="c-number">0</span>;
    list-&gt;compare = cmp;
    <span class="c-keyword">return</span> list;
}

Bool <span class="c-function">list_insert</span>(LinkedList* list, <span class="c-keyword">void</span>* data) {
    NodePtr new_node = (NodePtr)malloc(<span class="c-keyword">sizeof</span>(Node));
    <span class="c-keyword">if</span> (!new_node) <span class="c-keyword">return</span> FALSE;
    
    new_node-&gt;data = data;
    new_node-&gt;next = list-&gt;head;
    list-&gt;head = new_node;
    list-&gt;size++;
    <span class="c-keyword">return</span> TRUE;
}

<span class="c-keyword">void</span> <span class="c-function">list_print</span>(LinkedList* list, <span class="c-keyword">void</span> (*print_func)(<span class="c-keyword">void</span>*)) {
    NodePtr current = list-&gt;head;
    <span class="c-keyword">while</span> (current) {
        print_func(current-&gt;data);
        current = current-&gt;next;
    }
}

<span class="c-comment">// 整数比较函数</span>
<span class="c-keyword">int</span> <span class="c-function">int_compare</span>(<span class="c-keyword">const</span> <span class="c-keyword">void</span>* a, <span class="c-keyword">const</span> <span class="c-keyword">void</span>* b) {
    <span class="c-keyword">return</span> *(<span class="c-keyword">int</span>*)a - *(<span class="c-keyword">int</span>*)b;
}

<span class="c-comment">// 打印整数</span>
<span class="c-keyword">void</span> <span class="c-function">print_int</span>(<span class="c-keyword">void</span>* data) {
    <span class="c-function">printf</span>(<span class="c-string">"%d "</span>, *(<span class="c-keyword">int</span>*)data);
}

<span class="c-keyword">int</span> <span class="c-function">main</span>() {
    <span class="c-keyword">int</span> i;
    <span class="c-comment">// 创建链表</span>
    LinkedList* list = list_create(int_compare);
    
    <span class="c-comment">// 插入数据</span>
    <span class="c-keyword">int</span> values[] = {<span class="c-number">10</span>, <span class="c-number">20</span>, <span class="c-number">30</span>, <span class="c-number">5</span>};
    <span class="c-keyword">for</span> (i = <span class="c-number">0</span>; i &lt; <span class="c-number">4</span>; i++) {
        <span class="c-keyword">int</span>* val = (<span class="c-keyword">int</span>*)malloc(<span class="c-keyword">sizeof</span>(<span class="c-keyword">int</span>));
        *val = values[i];
        list_insert(list, val);
    }
    
    <span class="c-comment">// 打印链表</span>
    <span class="c-function">printf</span>(<span class="c-string">"链表内容: "</span>);
    list_print(list, print_int);
    <span class="c-function">printf</span>(<span class="c-string">"\n链表大小: %u\n"</span>, list-&gt;size);
    
    <span class="c-comment">// 清理内存（简化版，实际应用中需要完整清理）</span>
    free(list);
    
    <span class="c-keyword">return</span> <span class="c-number">0</span>;
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- 练习题 -->

    </main>

    <script>
        // 为所有代码块添加复制按钮
        document.addEventListener('DOMContentLoaded', function() {
            const codeBlocks = document.querySelectorAll('.code-block');
            
            codeBlocks.forEach(function(block) {
                const title = block.querySelector('.code-block-title');
                if (title) {
                    // 创建复制按钮
                    const copyButton = document.createElement('button');
                    copyButton.className = 'copy-button';
                    copyButton.textContent = '复制';
                    
                    // 添加点击事件
                    copyButton.addEventListener('click', function() {
                        const code = block.querySelector('code');
                        if (code) {
                            // 获取代码内容
                            const textToCopy = code.textContent;
                            
                            // 创建临时文本区域
                            const textArea = document.createElement('textarea');
                            textArea.value = textToCopy;
                            document.body.appendChild(textArea);
                            textArea.select();
                            
                            try {
                                // 执行复制命令
                                const successful = document.execCommand('copy');
                                if (successful) {
                                    // 显示复制成功状态
                                    copyButton.textContent = '已复制';
                                    copyButton.classList.add('copied');
                                    
                                    // 2秒后恢复按钮状态
                                    setTimeout(function() {
                                        copyButton.textContent = '复制';
                                        copyButton.classList.remove('copied');
                                    }, 2000);
                                }
                            } catch (err) {
                                console.error('复制失败:', err);
                            }
                            
                            // 移除临时文本区域
                            document.body.removeChild(textArea);
                        }
                    });
                    
                    // 将按钮添加到标题栏
                    title.appendChild(copyButton);
                }
            });
        });

        // 导航栏高亮效果
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.tutorial-nav a');
            const sections = document.querySelectorAll('.section');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            const observerOptions = {
                root: null,
                rootMargin: '-20% 0px -70% 0px',
                threshold: 0
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${id}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, observerOptions);
            
            sections.forEach(section => observer.observe(section));
        });
    </script>
</body>
</html>
